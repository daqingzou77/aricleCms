var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=c),a>>>=1)c+=c;return d}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var c=[],d;for(d in a)$jscomp.owns(a,d)&&c.push(a[d]);return c}},"es8","es3");var y="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},z="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function A(a,b){if(b){var c=z;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&y(c,a,{configurable:!0,writable:!0,value:b})}}A("Array.prototype.fill",function(a){return a?a:function(a,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
(function(){function a(d,a){var e=d.x-a.x;d=d.y-a.y;a=Math.sqrt(e*e+d*d);return 0<d?Math.acos(e/a):2*Math.PI-Math.acos(e/a)}function b(d,a){var e=d.x-a.x;d=d.y-a.y;a=Math.sqrt(e*e+d*d);e=0<d?Math.acos(e/a)+Math.PI/2:2*Math.PI-Math.acos(e/a)+Math.PI/2;e>2*Math.PI&&(e-=2*Math.PI);return e%(2*Math.PI)}var c={};window.f=c;c.a=function(d,a){this.x=d;this.y=a};c.a.prototype={sub:function(d){return new c.a(this.x-d.x,this.y-d.y)},add:function(d){return new c.a(this.x+d.x,this.y+d.y)},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y)},normalize:function(d){var a=this.length();this.x=this.x*d/a;this.y=this.y*d/a},toString:function(){return"["+this.x+","+this.y+"]"},xa:function(d){return 1E-6>Math.abs(d.x-this.x)&&1E-6>Math.abs(d.y-this.y)?!0:!1},clone:function(){return new c.a(this.x,this.y)},set:function(d){this.x=d.x;this.y=d.y}};c.a.f=function(d,a,b){return new c.a(d.x*b+a.x*(1-b),d.y*b+a.y*(1-b))};c.a.g=function(d,a){return Math.sqrt((a.x-d.x)*(a.x-d.x)+(a.y-d.y)*(a.y-d.y))};c.ga=function(d,a,c,b,g){this.U=
d;this.V=a;this.h=c;this.i=b;this.end=g};c.P=function(){this.l=-1;this.G=10;this.W=2;this.wa=this.va=this.J=.5};c.D=function(d,a){this.H=new c.a(d,a);this.j=new c.a(d,a);this.s=new c.a(d,a)};c.F=function(a,e,c,b,g,h){this.w=a;this.A=e;this.B=c;this.d=b;this.e=g;this.M=h};c.F.prototype={ya:function(){this.w=1;this.A=this.e=this.B=0;this.d=1;this.M=0},rotate:function(a){var d=Math.cos(a);a=Math.sin(a);return new c.F(d,a,-a,d,0,0)},multiply:function(a,e){return new c.F(a.w*e.w+a.B*e.A,a.A*e.w+a.d*e.A,
a.w*e.B+a.B*e.d,a.A*e.B+a.d*e.d,a.w*e.e+a.B*e.M+a.e,a.A*e.e+a.d*e.M+a.M)},ea:function(a){return new c.a(this.w*a.x+this.B*a.y+this.e,this.A*a.x+this.d*a.y+this.M)}};c.c=function(){};c.c.o=function(a,e,b,k){e=(e.y-a.y)/(e.x-a.x);k=(k.y-b.y)/(k.x-b.x);if(e==k)return null;if(isFinite(e)){if(isFinite(k)){var d=a.y-e*a.x;b=b.y-k*b.x;a=(d-b)/(k-e)}else d=a.y-e*a.x,a=b.x;b=e*a+d}else a=a.x,b=b.y-k*b.x,b=k*a+b;return new c.a(a,b)};c.c.g=function(a,e,c){c=c.sub(e);a=a.sub(e);return 0<c.x*a.y-c.y*a.x?!0:!1};
c.c.da=function(a,e,b,k,g,h){h=Math.sqrt(Math.max(Math.max(c.a.g(e,b),c.a.g(e,k)),c.a.g(b,g)))*(h||1);30>h&&(h=30);for(var d,f,p=0;1>=p;p+=1/h)d=Math.pow(p,3)*(b.x+3*(k.x-g.x)-e.x)+3*Math.pow(p,2)*(e.x-2*k.x+g.x)+3*p*(k.x-e.x)+e.x,f=Math.pow(p,3)*(b.y+3*(k.y-g.y)-e.y)+3*Math.pow(p,2)*(e.y-2*k.y+g.y)+3*p*(k.y-e.y)+e.y,a.push(new c.a(d,f))};c.c.v=function(a,e,b,k,g){for(var d,f=Math.sqrt(Math.max(Math.max(c.a.g(e,b),c.a.g(e,k)),c.a.g(b,k)))*(g||1),m=0;1>=m;m+=1/f)g=(1-m)*(1-m)*e.x+2*m*(1-m)*k.x+m*m*
b.x,d=(1-m)*(1-m)*e.y+2*m*(1-m)*k.y+m*m*b.y,a.push(new c.a(g,d));a.push(new c.a(b.x,b.y))};c.c.Wa=function(a,e,b){var d=b.sub(e);d=a.add(new c.a(-d.y,d.x));e=c.a.f(e,b,.5).sub(c.c.o(e,b,a,d));return a.add(e).add(e)};c.c.I=function(a,e,b){var d=c.a.g(a,e),f=c.a.g(e,b);a=b.sub(a);a.normalize(1);b=new c.D(e.x,e.y);b.s.x=e.x-a.x*d*.3;b.s.y=e.y-a.y*d*.3;b.j.x=e.x+a.x*f*.3;b.j.y=e.y+a.y*f*.3;return b};c.c.O=function(a){for(var d=0,b=a.length,k=0;k<b-1;k++)d+=c.a.g(a[k],a[k+1]);return d};c.c.Va=function(a,
e){var d=a.length;if(0>e)return a[0];if(1<e)return a[d-1];e*=c.c.O(a);for(var b=0,g,h=0;h<d-1;h++){var l=c.a.g(a[h],a[h+1]);b+=l;if(b>=e){g=c.a.f(a[h],a[h+1],(b-e)/l);break}}return g};c.c.C=function(a,e,b,k,g){var d=d||"JointStyle.MITER",f=f||Number.NaN,m=a.length;if(!(2>m))for(var p=c.c.O(a),n=0,q,r=0;r<m;r++)0==r?(q=c.c.ca(a[0],a[1],k),e.push(q.pop()),b.push(q.pop())):r==a.length-1?(q=c.c.ca(a[a.length-1],a[a.length-2],g),b.push(q.pop()),e.push(q.pop())):(n+=c.a.g(a[r],a[r-1]),q=c.c.Ba(a[r-1],a[r],
a[r+1],k-n/p*(k-g),d,f),e.push(q.pop()),b.push(q.pop()))};c.c.Ba=function(a,e,b,k,g,h){var d=a.sub(e),f=b.sub(e);d.normalize(1);f.normalize(1);f=d.add(f);f.normalize(1);if(.001>Math.abs(f.x)&&.001>Math.abs(f.y))return c.c.ca(e,b,k);"JointStyle.MITER"==g?(b=d.x*f.x+d.y*f.y,k/=Math.sqrt(1-b*b),!isNaN(h)&&k>h?f.normalize(h):f.normalize(k)):"JointStyle.ROUND"==g&&f.normalize(k);h=e.add(f);k=[];c.c.g(h,a,e)?(k.push(h),k.push(e.sub(f))):(k.push(e.sub(f)),k.push(h));return k};c.c.ca=function(a,e,b){e=e.sub(a);
e=new c.a(e.y,-e.x);e.normalize(b);b=a.add(e);a=a.sub(e);e=[];e.push(a);e.push(b);return e};c.c.u=function(a,e){var d=[];if(2>a.length)return d;if(2==a.length)return d.push(a[0]),d.push(a[1]),d;a=this.Fa(a,e);for(e=0;e<a.length-1;e++){var c=a[e],b=a[e+1];this.da(d,c.H,b.H,c.j,b.s,1)}return d};c.c.Fa=function(a,e){var d=[],b=a.length;if(e){for(e=0;e<b;e++)0==e?d.push(c.c.I(a[b-1],a[e],a[e+1])):e==b-1?d.push(c.c.I(a[e-1],a[e],a[0])):d.push(c.c.I(a[e-1],a[e],a[e+1]));d.push(c.c.I(a[b-1],a[0],a[1]))}else for(e=
0;e<b;e++)0==e||e==b-1?d.push(new c.D(a[e].x,a[e].y)):d.push(c.c.I(a[e-1],a[e],a[e+1]));return d};c.c.X=function(a,e,b){if(0>(a.x-e.x)*(b.x-e.x)+(a.y-e.y)*(b.y-e.y))var d=c.a.g(a,e);else if(0>(a.x-b.x)*(e.x-b.x)+(a.y-b.y)*(e.y-b.y))d=c.a.g(a,b);else{var f=a.sub(e),h=a.sub(b);f=Math.abs(f.x*h.y-f.y*h.x);b=c.a.g(e,b);0==b?d=c.a.g(a,e):d=f/b}return d};c.c.Sa=function(a){for(var d=[],b=a.length,k=0;k<b-1;k++){var g=a[k],h=a[k+1];c.c.da(d,g.H,h.H,g.s,h.j,3)}c.c.da(d,a[b-1].H,a[0].H,a[b-1].s,a[0].j,3);
return d};c.b=function(){};c.b.u=function(a,e){a=c.c.u(a,e);e=[];for(var d=0;d<a.length;d++){var b=a[d];e.push([b.x,b.y])}return e};c.b.ra=function(a,e,b){a=c.b.za(a,e,b);a=c.b.Ca(a[2],a[0],a[1]);a=c.c.Sa(a);e=[];for(b=0;b<a.length;b++){var d=a[b];e.push([d.x,d.y])}return e};c.b.za=function(a,e,b){var d=c.a.g(a,e),f=c.a.g(a,b),h=Math.max(d,c.a.g(e,b),f);return h==d?c.b.Y(b,a,e):h==f?c.b.Y(e,a,b):c.b.Y(a,e,b)};c.b.Y=function(a,e,b){var d=b.sub(e);d=new c.a(d.y,-d.x);var f=c.c.X(a,e,b);d.normalize(f);
f=c.a.f(e,b,.5);var h=[];c.c.g(a,e,b)?(h.push(b),h.push(e),h.push(f.sub(d))):(h.push(e),h.push(b),h.push(f.add(d)));h.push(a);return h};c.b.Ca=function(a,e,b){var d=[],f=c.a.g(e,b),h=c.a.f(e,b,.5),l=b.sub(e),m=new c.a(l.y,-l.x),p=c.c.X(a,e,b);m.normalize(f/4);var n=new c.F;n.ya();n=n.rotate(-Math.PI/8);var q=n.ea(m);n=new c.D(e.x,e.y);n.j=new c.a(e.sub(q).x,e.sub(q).y);n.s=new c.a(e.add(q).x,e.add(q).y);d.push(n);l.normalize(f/4);n=new c.D(a.x,a.y);n.j=new c.a(a.sub(l).x,a.sub(l).y);n.s=new c.a(a.add(l).x,
a.add(l).y);d.push(n);m.normalize(f/4);n=new c.F;n.ya();n=n.rotate(Math.PI/8);q=n.ea(m);n=new c.D(b.x,b.y);n.j=new c.a(b.add(q).x,b.add(q).y);n.s=new c.a(b.sub(q).x,b.sub(q).y);d.push(n);m.normalize(Math.sqrt(p));a=h.sub(m);l.normalize(f/4);n=new c.D(a.x,a.y);n.j=new c.a(a.add(l).x,a.add(l).y);n.s=new c.a(a.sub(l).x,a.sub(l).y);d.push(n);return d};c.b.$=function(a,e,b,k,g){a=e.sub(a);b*=a.length();b>k&&0<k?a.normalize(k):a.normalize(b);k=e.sub(a);return c.b.ja(k,e,g)};c.b.S=function(a,e,b){var d=
e.sub(a);b=b?new c.a(d.y,-d.x):new c.a(-d.y,d.x);a=c.a.f(a,e,.5);d.length();b.x/=8;b.y/=8;return a.add(b)};c.b.Z=function(a,e,b,k,g){if(!e.xa(b)){g=g||.5;var d=b.sub(e),f=-1!=k.l?k.l/2:d.length()/2;k.W=f/2;d=new c.a(d.y,-d.x);d.normalize(k.W*g);var m=e.add(d),p=e.sub(d),n=b.add(d),q=b.sub(d);d.normalize(f);g=e.add(d);var r=e.sub(d),v=c.a.f(b,e,k.J);m=c.c.o(m,n,v,g);p=c.c.o(p,q,v,r);e=c.a.f(b,e,k.va);d=d.clone();d.normalize(f*k.wa);e.add(d);e.sub(d);a.push(m);a.push(g);a.push(b);a.push(r);a.push(p)}};
c.b.aa=function(a,e,b,k,g){e=b.sub(e);k*=e.length();e.normalize(k);k=b.sub(e);c.b.Z(a,k,b,g,.5)};c.b.ja=function(a,e,b){if(a.xa(e))return new c.ga(a,a,a,a,a);var d=e.sub(a),f=-1!=b.l?b.l/2:d.length()/2;b.W=f/2;var h=new c.a(d.y,-d.x);h.normalize(b.W/2);d=a.add(h);var l=a.sub(h),m=e.add(h),p=e.sub(h);h.normalize(f);var n=a.add(h),q=a.sub(h),r=c.a.f(e,a,b.J);m=c.c.o(d,m,r,n);p=c.c.o(l,p,r,q);a=c.a.f(e,a,b.va);h=h.clone();h.normalize(f*b.wa);a.add(h);a.sub(h);return new c.ga(d,l,m,p,e)};c.b.oa=function(a,
e,b,k,g){var d=[],f=c.b.$(a,b,.3,80,g),m=c.b.$(e,k,.3,80,g),p=[],n=[];c.b.aa(p,a,b,.3,g);c.b.aa(n,e,k,.3,g);var q=c.c.g(b,a,e),r=c.c.g(k,a,e);k=c.c.g(f.h,a,e);b=c.c.g(f.i,a,e);g=c.c.g(m.h,a,e);var v=c.c.g(m.i,a,e);if(0==q){var w=f.i,x=f.V,u=c.b.S(a,f.h,!0);c.c.v(d,a,f.h,u,3);d=d.concat(p)}else{w=f.h;x=f.U;u=c.b.S(a,f.i,!1);var B=[];c.c.v(B,a,f.i,u,3);d=d.concat(B);d=d.concat(p.reverse())}u=a.sub(e);1==r?(f=m.i,p=m.V,a=c.b.ta(a,e,w,f,q==r),q=a.add(u),c.b.fa(d,w,x,a,q,f,p,k==b,g==v),d=d.concat(n.reverse()),
u=c.b.S(m.h,e,!1),c.c.v(d,m.h,e,u,3)):(f=m.h,p=m.U,a=c.b.ta(a,e,w,f,q==r),q=a.add(u),c.b.fa(d,w,x,a,q,f,p,k==b,g==v),d=d.concat(n),u=c.b.S(m.i,e,!0),c.c.v(d,m.i,e,u,3));e=[];for(m=0;m<d.length;m++)n=d[m],e.push([n.x,n.y]);return e};c.b.fa=function(a,e,b,k,g,h,l,m,p){b=m?c.c.o(e,b,k,g):b;g=p?c.c.o(h,l,k,g):l;b&&c.c.v(a,e,k,b,1);g&&c.c.v(a,k,h,g,1)};c.b.ta=function(a,e,b,k,g){var d=c.a.f(a,e,.5),f=c.a.f(b,k,.5),m=a.sub(e),p=b.add(m);m=k.add(m);p=c.c.o(p,b,d,f);m=c.c.o(m,k,d,f);var n=c.a.g(d,p),q=c.a.g(d,
m);c.c.g(b,a,e);c.c.g(k,a,e);if(g)return n<q?c.a.f(d,p,.7):c.a.f(d,m,.7);a=c.a.f(d,f,.9);return Math.min(n,q)>c.a.g(d,a)?a:n<q?c.a.f(p,d,.3):c.a.f(m,d,.3)};c.b.R=function(a,e,b,k,g){var d=[],f=e.sub(a);f=new c.a(f.y,-f.x);f.normalize(c.a.g(a,e)*k);k=a.add(f);f=a.sub(f);d.push(k);c.b.Z(d,c.a.f(a,e,.3),e,b,g);d.push(f);a=[];for(e=0;e<d.length;e++)b=d[e],a.push([b.x,b.y]);return a};c.b.T=function(a,e,b,k,g){g|=0;var d=[],f=c.a.f(a,e,.5);if(c.c.g(a,f,b))var m=e,p=a;else m=a,p=e;var n=c.a.f(f,b,.3);f=
c.b.ja(n,b,k);var q=[];c.b.Z(q,n,b,k);n=f.U.add(f.U.sub(f.h));k=f.V.add(f.V.sub(f.i));c.c.v(d,m,f.h,n);d=d.concat(q);m=[];c.c.v(m,f.i,p,k);d=d.concat(m);1==g&&d.push(c.a.f(c.a.f(a,e,.5),b,.8));a=[];for(e=0;e<d.length;e++)b=d[e],a.push([b.x,b.y]);return a};c.b.ma=function(a,e){var d=.07,b=a.length,g=a[b-1],h=c.c.I(a[b-3],a[b-2],g),l=c.b.$(h.j,g,.5,200,e);b=[];c.b.aa(b,h.j,g,.5,e);g=[];e=[];c.c.C(a,g,e,c.c.O(a)*d,c.a.g(l.h,l.i)/2);g[g.length-1]=l.h;e[e.length-1]=l.i;a=c.c.u(g);d=c.c.u(e);b=a.concat(b);
b=b.concat(d.reverse());a=[];for(d=0;d<b.length;d++)l=b[d],a.push([l.x,l.y]);return a};c.b.Ua=function(a,e,b,k){var d=null,f=new c.P;if(2001==a){if(4>e.length)return;d=c.b.oa(e[0],e[1],e[2],e[3],f)}else 2003==a?d=c.b.R(e[0],e[1],f,.125,.5):2004==a?(f.l=.8*c.a.g(e[0],e[1]),f.J=0,d=c.b.R(e[0],e[1],f,.35,.8)):2005==a?d=c.b.T(e[0],e[1],e[2],f):2006==a?d=c.b.T(e[0],e[1],e[2],f):2007==a?d=c.b.ma(e,f):2008==a?d=c.b.u(e,!0):2011==a&&(d=c.b.ra(e[0],e[1],e[2]));if(null!=d){k.beginPath();k.moveTo(d[0].x,d[0].y);
for(a=1;a<d.length;a++)k.lineTo(d[a].x,d[a].y);k.lineTo(d[0].x,d[0].y);k.closePath();k.fillStyle=b.fillColor;k.fill()}return d};c.b.m=function(a,e,f){var d=[];if(isNaN(f.x)||isNaN(f.y)||1>c.c.X(f,a,e))return[a,e];var g=(a.x*a.x-e.x*e.x+a.y*a.y-e.y*e.y)/2,h=(e.x*e.x-f.x*f.x+e.y*e.y-f.y*f.y)/2,l=a.x-e.x,m=e.x-f.x,p=a.y-e.y,n=e.y-f.y;g={x:(g*n-h*p)/(l*n-m*p),y:(g*m-h*l)/(p*m-n*l)};h=c.a.g(a,g);a=b(a,g)-Math.PI/2;l=b(e,g)-Math.PI/2;m=b(f,g)-Math.PI/2;e=Math.min(a,l);f=Math.max(a,l);if(m<e||m>f)a=e,e=
f,f=a+2*Math.PI;for(;e<=f;e+=.1)a=g.x+h*Math.cos(e),l=g.y+h*Math.sin(e),d.push(new c.a(a,l));a=g.x+h*Math.cos(f);l=g.y+h*Math.sin(f);d.push(new c.a(a,l));return d};c.b.ia=function(a,e,b,k){for(var d=[];b<k;b+=.1){var f=a.x+e*Math.cos(b),l=a.y+e*Math.sin(b);d.push(new c.a(f,l))}f=a.x+e*Math.cos(k);l=a.y+e*Math.sin(k);d.push(new c.a(f,l));return d};c.b.ua=function(a,e){for(var d=a.length,b=[],g,h=0;h<d;h++)0==h?(g=c.a.g(a[0],a[1]),b.push(c.a.f(a[0],a[1],1+e/g)),b.push(c.a.f(a[0],a[1],1-e/g))):d-1==
h?(g=c.a.g(a[d-2],a[d-1]),b.push(c.a.f(a[d-2],a[d-1],e/g)),b.push(c.a.f(a[d-2],a[d-1],-e/g))):(b.push(c.a.f(a[h-1],a[h],e/c.a.g(a[h-1],a[h]))),b.push(c.a.f(a[h],a[h+1],1-e/c.a.g(a[h],a[h+1]))));return b};c.b.N=function(a){if(2>a.length)return a;var d=Math.sqrt(c.c.O(a)/a.length),b=[],k=[];c.c.C(a,b,k,d,d);a=c.b.ua(a,d);d=a[0];d.x=b[0].x;d.y=b[0].y;b=[];for(d=0;d<k.length-1;d++){var g=c.b.m(a[2*d],a[2*d+1],k[d]);b=b.concat(g.reverse())}k=[];k.push(b);return k};c.b.ba=function(a,e){if(2>a.length)return a;
e=Math.sqrt(c.c.O(a)/a.length);var d=[];c.c.C(a,[],d,e,e);a=c.b.ua(a,e);e=[];for(var b=0;b<d.length;b++){var g=c.b.m(a[2*b],a[2*b+1],d[b]);g=g.reverse();e.push(g)}return e};c.b.Qa=function(a){if(2>a.length)return a;var d=[],b=[],k=a[0],g=a[1],h=30/(30+Math.sqrt((k.x-g.x)*(k.x-g.x)+(k.y-g.y)*(k.y-g.y))),l=(g.x-k.x*h)/(1-h),m=(g.y-k.y*h)/(1-h),p=new c.a((k.x-g.x*h)/(1-h),(k.y-g.y*h)/(1-h));h=k.sub(p);h=new c.a(h.y,-h.x);h.normalize(20);p=c.a.f(k,p,.5);k=p.add(h);h=p.sub(h);d.push(k);b.push(h);c.c.C(a,
d,b,10,10);l=new c.a(l,m);h=g.sub(l);a=new c.a(h.y,-h.x);a.normalize(20);l=c.a.f(g,l,.5);g=l.sub(a);a=l.add(a);d.push(g);b.push(a);g=[];g.push(d);g.push(b);return g};c.b.f=function(a,e){var d=new c.P;d.G=6;var b=e.sub(a),g=-1!=d.l?d.l/2:d.G/2,h=new c.a(b.y,-b.x);b=b.clone();b.normalize(b.length()-d.G);b=b.add(a);h=h.clone();h.normalize(g);g=b.add(h);h=b.sub(h);d=c.a.f(e,b,d.J);b=[];b.push(a);b.push(d);b.push(g);b.push(e);b.push(h);b.push(d);return b};c.b.sa=function(a,b,f){var d=new c.P;d.G=6;var e=
b.sub(a),h=-1!=d.l?d.l/2:d.G/2,l=new c.a(e.y,-e.x);e=e.clone();e.normalize(e.length()-d.G);e=e.add(a);l=l.clone();l.normalize(h);h=e.add(l);l=e.sub(l);d=c.a.f(b,e,d.J);e=[];e.push(f);e.push(a);e.push(d);e.push(h);e.push(b);e.push(l);e.push(d);return e};c.b.K=function(a,e){var d=[],b=new c.a(0,0);b.x=a.x-e/2;b.y=a.y+.2*e;var g=new c.a(0,0);g.x=a.x-e/2;g.y=b.y-e/3;var h=new c.a(0,0);h.x=a.x-e/2;h.y=b.y+e/3;var l=[];l.push(new c.a(a.x,a.y));l.push(new c.a(a.x+e,a.y));d.push(l);l=[];l.push(g);l.push(h);
d.push(l);g=new c.a(0,0);g.x=a.x+e/2;g.y=a.y+.2*e;h=new c.a(0,0);h.x=a.x+e/2;h.y=g.y-e/3;l=new c.a(0,0);l.x=a.x+e/2;l.y=g.y+e/3;var m=[];m.push(h);m.push(l);d.push(m);h=[];h.push(b);h.push(g);d.push(h);b=new c.a(0,0);b.x=a.x;b.y=g.y;h=new c.a(0,0);h.x=a.x;h.y=g.y-.8*e;a=c.b.f(b,h);d.push(a);return d};c.b.Aa=function(a,b){var d=[],e=[];e.push(new c.a(a.x,a.y));e.push(new c.a(a.x+b,a.y));d.push(e);e=new c.a(0,0);e.x=a.x-b/2;e.y=a.y+.2*b;var g=new c.a(0,0);g.x=a.x-b/2;g.y=e.y-b/3;var h=new c.a(0,0);
h.x=a.x-b/2;h.y=e.y+b/3;var l=[];l.push(g);l.push(h);d.push(l);g=new c.a(0,0);g.x=a.x+b/2;g.y=a.y+.2*b;l=new c.a(0,0);l.x=a.x+b/2;l.y=g.y-b/3;h=new c.a(0,0);h.x=a.x+b/2;h.y=g.y+b/3;var m=[];m.push(l);m.push(h);d.push(m);l=[];m=new c.a(0,0);m.x=e.x;m.y=a.y+Math.sqrt(3)*b/2;var p=new c.a(0,0);p.x=g.x;p.y=a.y+Math.sqrt(3)*b/2;e=new c.a(0,0);e.x=a.x;e.y=h.y;l.push(m);l.push(e);l.push(p);d.push(l);h=new c.a(0,0);h.x=a.x;h.y=g.y-.8*b;a=c.b.f(e,h);d.push(a);return d};c.b.la=function(a,b){var d=[],e=[];e.push(new c.a(a.x,
a.y));e.push(new c.a(a.x+b,a.y));d.push(e);e=new c.a(0,0);e.x=a.x-b/2;e.y=a.y+.2*b;var g=new c.a(0,0);g.x=a.x-b/2;g.y=e.y-b/3;var h=new c.a(0,0);h.x=a.x-b/2;h.y=e.y+b/3;e=[];e.push(g);e.push(h);d.push(e);e=new c.a(0,0);e.x=a.x+b/2;e.y=a.y+.2*b;var l=new c.a(0,0);l.x=a.x+b/2;l.y=e.y-b/3;var m=new c.a(0,0);m.x=a.x+b/2;m.y=e.y+b/3;var p=[];p.push(l);p.push(m);d.push(p);p=c.a.f(g,h,.66);var n=c.a.f(l,m,.33);l=c.a.f(l,m,.66);m=[];m.push(c.a.f(g,h,.33));m.push(n);d.push(m);g=[];g.push(p);g.push(l);d.push(g);
g=new c.a(0,0);g.x=a.x;g.y=l.y;h=new c.a(0,0);h.x=a.x;h.y=e.y-.8*b;a=c.b.f(g,h);d.push(a);return d};c.b.ka=function(a,b,f){b/=c.a.g(a,f);var d=new c.a(0,0);d.x=(1-b)*a.x+b*f.x;d.y=(1-b)*a.y+b*f.y;return d};c.b.pa=function(a,b){var d=[],e=[];e.push(a);e.push(b);var g=[],h=[],l=b.sub(a);l=new c.a(l.y,-l.x);l.normalize(20);g.push(a.add(l));h.push(a.sub(l));c.c.C(e,g,h,10,10);g.push(b.add(l));h.push(b.sub(l));d.push(g);d.push(h);return d};c.b.qa=function(a,b){var d=[],e=[];e.push(a);e.push(b);var g=[],
h=[],l=b.sub(a);l=new c.a(l.y,-l.x);l.normalize(20);g.push(a.add(l));h.push(a.sub(l));c.c.C(e,g,h,5,5);g.push(b.add(l));h.push(b.sub(l));a=c.b.ha(g);h=c.b.ha(h);for(b=0;b<a.length;b++)d.push(a[b]);for(b=0;b<h.length;b++)d.push(h[b]);return d};c.b.ha=function(a){var d=[],b=[];b.push(a[0]);b.push(a[1]);var k=a[1],g=a[2];b.push(c.a.f(k,g,.9));d.push(b);b=[];b.push(c.a.f(k,g,.8));b.push(c.a.f(k,g,.2));d.push(b);b=[];b.push(c.a.f(k,g,.1));b.push(g);b.push(a[3]);d.push(b);return d};c.b.Da=function(a,b){if(5>
a.length)return a;var d=a[2],e=c.b.ka(d,b,a[1]),g=c.b.ka(d,b,a[3]);e=c.b.sa(a[1],a[0],e);b=c.b.K(d,b);a=c.b.sa(a[3],a[4],g);b.push(e);b.push(a);return b};c.b.Ea=function(a,b){if(2>a.length)return a;var d=a[0],e=a[1],g=new c.a(d.x,e.y);a=c.b.qa(d,new c.a(e.x,d.y));g=c.b.qa(e,g);b=c.b.K(c.a.f(d,e,.5),b);for(d=0;d<a.length;d++)b.push(a[d]);for(d=0;d<g.length;d++)b.push(g[d]);return b};c.b.Ga=function(a,b){if(5>a.length)return a;var d=c.b.pa(a[0],a[1]),e=c.b.pa(a[2],a[3]);a=c.b.K(a[4],b);for(b=0;b<d.length;b++)a.push(d[b]);
for(b=0;b<e.length;b++)a.push(e[b]);return a};c.b.Ha=function(a,b){if(4>a.length)return a;b=c.b.K(a[0],b);var d=c.b.f(a[1],a[2]);a=c.b.f(a[1],a[3]);b.push(d);b.push(a);return b};c.b.L=function(a,b,f){var d=[];d.push(a);d.push(b);a=[];c.c.C(d,[],a,f,f);return a};c.b.Ia=function(a,b){if(2>a.length)return a;var d=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(d=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new c.a(d,e);g=new c.a(g,h);h=new c.a(g.x,a.y);d=new c.a(a.x,g.y);e=c.b.K(a,b);for(var l=
c.b.K(h,b),m=c.b.la(g,b),p=c.b.la(d,b),n=[],q=0;q<e.length;q++)n.push(e[q]),n.push(l[q]),n.push(m[q]),n.push(p[q]);for(q=e.length;q<m.length;q++)n.push(m[q]),n.push(p[q]);n.push(c.b.L(a,d,b));n.push(c.b.L(d,g,b));n.push(c.b.L(g,h,b));n.push(c.b.L(h,a,b));return n};c.b.Ja=function(a,b){if(2>a.length)return a;for(var d=[],e=0;e<a.length;e++){for(var g=c.b.Aa(a[e],b),h=0;h<g.length;h++)d.push(g[h]);e!=a.length-1?(g=a[e],h=a[e+1]):(g=a[e],h=a[0]);d.push(c.b.L(g,h,b))}return d};c.b.Ka=function(a,b){var d=
a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(d=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new c.a(d,e);d=new c.a(g,h);g=new c.a(d.x,a.y);h=new c.a(a.x,d.y);e=[];e.push(a);e.push(h);e.push(d);e.push(g);e.push(a);g=c.b.N(e);h=b[0];b=b[1];a=c.a.f(a,d,.5);d=new c.a(a.x-h/4,a.y-b/2);e=new c.a(a.x-h/2,a.y);var l=new c.a(a.x-h/4,a.y+b/2),m=new c.a(a.x,a.y),p=new c.a(a.x+h/4,a.y-b/2),n=new c.a(a.x+h/2,a.y),q=[];q.push(new c.a(a.x+h/4,a.y+b/2));q.push(n);q.push(p);q.push(m);q.push(l);q.push(e);
q.push(d);h=c.c.u(q,!1);b=h.pop();a=h.pop();b=c.b.f(a,b);for(a=0;a<b.length;a++)h.push(b[a]);g.push(h);return g};c.b.La=function(a,b){var d=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(d=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new c.a(d,e);g=new c.a(g,h);h=new c.a(g.x,a.y);var l=new c.a(a.x,g.y),m=[];m.push(a);m.push(l);m.push(g);m.push(h);m.push(a);a=c.b.N(m);g=b[0];b=b[1];d=new c.a(d+30,e+5);e=new c.a(d.x-b/2,d.y+b/2);h=new c.a(d.x,d.y+b);l=new c.a(h.x-b/2,h.y+b/2);m=[];m.push(d);
m.push(e);m.push(h);a.push(m);h=c.b.f(h,l);a.push(h);d=new c.a(d.x+5,e.y);e=c.b.f(new c.a(d.x+g,d.y),d);a.push(e);e=new c.a(d.x+g/2+10,d.y-b/2);h=new c.a(d.x+g/2+10,d.y+b/2);l=[];l.push(e);l.push(h);a.push(l);g=c.b.m(new c.a(d.x+g/4,e.y),new c.a(d.x+g/4,h.y),new c.a(d.x+g/4+b/2,(h.y+e.y)/2));a.push(g);return a};c.b.Ma=function(a,b){var d=a[0].x,e=a[0].y,g=a[1].x,h=a[1].y;a[0].x>a[1].x&&(d=a[1].x,g=a[0].x);a[0].y>a[1].y&&(e=a[1].y,h=a[0].y);a=new c.a(d,e);d=new c.a(g,h);g=new c.a(d.x,a.y);h=new c.a(a.x,
d.y);e=[];e.push(a);e.push(h);e.push(d);e.push(g);e.push(a);g=c.b.N(e);h=b[0];b=b[1];a=c.a.f(a,d,.5);d=c.b.f(new c.a(a.x,a.y-b/2),new c.a(a.x-h-10,a.y-b/2));g.push(d);d=new c.a(a.x-h/2,a.y);e=[];e.push(new c.a(a.x-h/2,a.y-b));e.push(d);g.push(e);b=c.b.m(new c.a(a.x-3*h/4-b/2,a.y-b),new c.a(a.x-3*h/4-b/2,a.y),new c.a(a.x-3*h/4,a.y-b/2));g.push(b);return g};c.b.na=function(a){a=c.b.m(a[0],a[2],a[1]);a.pop();a.pop();var b=a.pop(),d=a.pop();b=c.b.f(d,b);for(d=0;d<b.length;d++)a.push(b[d]);return a};c.b.Na=
function(a,b){var d=a[0];2==a.length&&(d=c.a.f(a[0],a[1],.5));a=b[0];b=b[1];var e=new c.a(d.x-a/2,d.y),g=new c.a(d.x+a/2,d.y),h=new c.a(d.x,d.y-b/2),l=new c.a(d.x,d.y+b/2);b=[];var m=[];m.push(e);m.push(h);m.push(g);h=c.b.na(m);b.push(h);m[0]=g;m[1]=l;m[2]=e;h=c.b.na(m);b.push(h);e=new c.a(e.x-10,d.y);e=c.b.f(new c.a(e.x-a,d.y),e);b.push(e);g=new c.a(g.x+10,d.y);d=c.b.f(new c.a(g.x+a,d.y),g);b.push(d);return b};c.b.Oa=function(a){return c.b.ia(a[0],c.a.g(a[0],a[1]),0,2*Math.PI)};c.b.Pa=function(b){var d=
[];d.push(b[0]);var f=c.a.g(b[0],b[1]),k=a(b[1],b[0]),g=a(b[2],b[0]);g<k&&(g+=2*Math.PI);b=c.b.ia(b[0],f,k,g);return d.concat(b)};c.b.Ta=function(a,b,f){var d=[];b=new c.a(0,-b);var e=new c.F(1,0,0,1,0,0);e.rotate(0);for(var h=0;h<f;h++){var l=e.ea(b);l=l.add(a);d.push(l);e=e.multiply(e,e.rotate(2*Math.PI/f))}return d};c.b.Ra=function(a,b,f){var d=null,e=new c.P;if(2001==a){if(4>b.length)return;d=c.b.oa(b[0],b[1],b[3],b[2],e)}else if(2003==a)d=c.b.R(b[0],b[1],e,.125,.5);else if(2004==a)e.l=.8*c.a.g(b[0],
b[1]),e.J=0,d=c.b.R(b[0],b[1],e,.35,.8);else if(2005==a)d=c.b.T(b[0],b[1],b[2],e,!1);else if(2006==a)d=c.b.T(b[0],b[1],b[2],e,!0);else if(2007==a)d=c.b.ma(b,e);else if(2008==a)d=c.b.u(b,!0);else if(2011==a)d=c.b.ra(b[0],b[1],b[2]);else{if(2031==a)return d=c.b.m(b[0],b[1],b[2]),[d];if(2032==a)d=c.b.N(b);else if(2033==a)d=c.b.ba(b,f);else if(2034==a)d=c.b.Qa(b);else if(2035==a)d=c.b.Da(b,f[0]);else if(2036==a)d=c.b.Ea(b,f[0]);else if(2037==a)d=c.b.Ga(b,f[0]);else if(2038==a)d=c.b.Ha(b,f[0]);else if(2039==
a)d=c.b.Ia(b,f[0]);else if(2040==a)d=c.b.Ja(b,f[0]);else if(2041==a)d=c.b.Ka(b,f);else if(2042==a)d=c.b.La(b,f);else if(2043==a)d=c.b.Ma(b,f);else if(2044==a)d=c.b.Na(b,f);else if(2052==a)d=c.b.N(b);else if(2053==a)d=c.b.ba(b,f);else if(2054==a)d=c.b.ba(b,f);else{if(2055==a||2056==a||2057==a)return d=c.b.m(b[0],b[1],b[2]),[d];if(2060==a)return d=c.b.Oa(b),[d];if(2061==a)return d=c.b.Pa(b),[d];if(2100==a||2101==a||2102==a||2150==a||2151==a||2152==a||2153==a||2154==a)return[b];if(2103==a||2104==a)return a=
b.length,f=c.a.g(b[0],b[a-1]),d=c.b.Ta(b[0],f,a+1),[d];if(2105==a)return f=[[b[0].x,b[0].y],[b[0].x,b[1].y],[b[1].x,b[1].y],[b[1].x,b[0].y]],[f];if(2071==a){f=c.b.u(b,!1);b=f.pop();a=f[f.length-1];b=c.b.f(new c.a(a[0],a[1]),new c.a(b[0],b[1]));a=[];for(d=0;d<b.length;d+=1)e=[b[d].x,b[d].y],a.push(e);return[f,a]}if(2072==a||2073==a){f=[];f.push([b[0].x,b[0].y]);f.push([b[1].x,b[1].y]);b=c.b.f(b[0],b[1]);a=[];for(d=1;d<b.length;d+=1)e=[b[d].x,b[d].y],a.push(e);return[f,a]}}}return d};window.H5JB_getJBArray=
function(a,b,f){for(var d=[],e=0;e<b.length;e+=2)d.push(new c.a(b[e],b[e+1]));return c.b.Ra(a,d,f)}})();function pointDistance(a,b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)}var R=6371E3;function distanceBetween(a,b){var c=Math.PI/180,d=Math.sin((b.lat-a.lat)*c/2),e=Math.sin((b.lng-a.lng)*c/2);a=d*d+Math.cos(a.lat*c)*Math.cos(b.lat*c)*e*e;return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function computeSegmentHeading(a,b){return(180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI+450)%360}function asRatioToPathLength(a,b){var c=a.value;return a.isInPixels?c/b:c}
function parseRelativeOrAbsoluteValue(a){if("string"===typeof a&&-1!==a.indexOf("%"))return{value:parseFloat(a)/100,isInPixels:!1};a=a?parseFloat(a):0;return{value:a,isInPixels:0<a}}function pointsEqual(a,b){return a.x===b.x&&a.y===b.y}function pointsToSegments(a){return a.reduce(function(a,c,d,e){if(0<d&&!pointsEqual(c,e[d-1])){d=e[d-1];e=0<a.length?a[a.length-1].distB:0;var b=pointDistance(d,c);a.push({a:d,b:c,distA:e,distB:e+b,heading:computeSegmentHeading(d,c)})}return a},[])}
function projectPatternOnPointPath(a,b){var c=pointsToSegments(a),d=c.length;if(0===d)return[];a=c[d-1].distB;var e=asRatioToPathLength(b.offset,a),f=asRatioToPathLength(b.endOffset,a);b=asRatioToPathLength(b.repeat,a);b*=a;f=0<f?a*f:0;var k=[];e=0<e?a*e:0;do k.push(e),e+=b;while(0<b&&e<a-f);var g=0,h=c[0];return k.map(function(a){for(;a>h.distB&&g<d-1;)g++,h=c[g];return{pt:interpolateBetweenPoints(h.a,h.b,(a-h.distA)/(h.distB-h.distA)),heading:h.heading}})}
function interpolateBetweenPoints(a,b,c){return b.x!==a.x?{x:a.x+c*(b.x-a.x),y:a.y+c*(b.y-a.y)}:{x:a.x,y:a.y+(b.y-a.y)*c}}GMap.Symbol=GMap.Symbol||{};
GMap.Symbol.Dash=GMap.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(a){GMap.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c,d,e){b=this.options;d=Math.PI/180;if(-1==b.pixelSize)return GMap.polyline([a.latLng,a.latLng],b.pathOptions);if(0==b.pixelSize)return e=c.project(a.latLng),a=-(a.heading-90)*d,a=GMap.point(e.x+10*Math.cos(a-1*Math.PI/3-Math.PI/2)/2,e.y+10*Math.sin(a-1*Math.PI/3-Math.PI/2)/2),d=e.add(e.subtract(a)),GMap.polyline([c.unproject(a),
c.unproject(d)],b.pathOptions);if(1==b.pixelSize)return e=c.project(a.latLng),a=-(a.heading-90)*d,a=GMap.point(e.x+10*Math.cos(a-Math.PI/3)/2,e.y+10*Math.sin(a-Math.PI/3)/2),d=e.add(e.subtract(a)),GMap.polyline([c.unproject(a),c.unproject(d)],b.pathOptions);e=c.project(a.latLng);a=-(a.heading-90)*d;a=GMap.point(e.x+b.pixelSize*Math.cos(a+Math.PI)/2,e.y+b.pixelSize*Math.sin(a)/2);d=e.add(e.subtract(a));return GMap.polyline([c.unproject(a),c.unproject(d)],b.pathOptions)}});GMap.Symbol.dash=function(a){return new GMap.Symbol.Dash(a)};
GMap.Symbol.ArrowHead=GMap.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(a){GMap.Util.setOptions(this,a);this.options.pathOptions.clickable=!1},buildSymbol:function(a,b,c,d,e){return this.options.polygon?GMap.polygon(this._buildArrowPath(a,c),this.options.pathOptions):GMap.polyline(this._buildArrowPath(a,c),this.options.pathOptions)},_buildArrowPath:function(a,b){var c=Math.PI/180,d=b.project(a.latLng),e=-(a.heading-90)*c,f=this.options.headAngle/
2*c;c=e+f;e-=f;c=GMap.point(d.x-this.options.pixelSize*Math.cos(c),d.y+this.options.pixelSize*Math.sin(c));d=GMap.point(d.x-this.options.pixelSize*Math.cos(e),d.y+this.options.pixelSize*Math.sin(e));return[b.unproject(c),a.latLng,b.unproject(d)]}});GMap.Symbol.arrowHead=function(a){return new GMap.Symbol.ArrowHead(a)};
GMap.Symbol.Marker=GMap.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(a){GMap.Util.setOptions(this,a);this.options.markerOptions.clickable=!1;this.options.markerOptions.draggable=!1},buildSymbol:function(a,b,c,d,e){this.options.rotate&&(this.options.markerOptions.rotationAngle=a.heading+(this.options.angleCorrection||0));return GMap.marker(a.latLng,this.options.markerOptions)}});GMap.Symbol.marker=function(a){return new GMap.Symbol.Marker(a)};
function isCoord(a){return a instanceof GMap.LatLng||Array.isArray(a)&&2===a.length&&"number"===typeof a[0]}var isCoordArray=function(a){return Array.isArray(a)&&isCoord(a[0])};
GMap.PolylineSymbol=GMap.FeatureGroup.extend({options:{patterns:[]},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._bounds=this._initBounds();this._patterns=this._initPatterns(this.options.patterns);this._lineLayers=[]},_initPaths:function(a,b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):Array.isArray(a)?
a.reduce(function(a,e){return a.concat(c._initPaths(e,b))},[]):[]},_initPatterns:function(a){return a.map(this._parsePatternDef)},setPatterns:function(a){this.options.patterns=a;this._patterns=this._initPatterns(this.options.patterns);this.redraw()},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},_parsePatternDef:function(a,b){return{symbolFactory:a.symbol,offset:parseRelativeOrAbsoluteValue(a.offset),endOffset:parseRelativeOrAbsoluteValue(a.endOffset),
repeat:parseRelativeOrAbsoluteValue(a.repeat)}},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this)},onRemove:function(a){this._map.off("moveend",this.redraw,this);this._map=null;GMap.FeatureGroup.prototype.onRemove.call(this,a)},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},_buildSymbols:function(a,b,c){var d=this;return c.map(function(e,f){return b.buildSymbol(e,
a,d._map,f,c.length)})},_getDirectionPoints:function(a,b){var c=this;if(2>a.length)return[];a=a.map(function(a){return c._map.project(a)});return projectPatternOnPointPath(a,b).map(function(a){return{latLng:c._map.unproject(GMap.point(a.pt)),heading:a.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(a){var b=this,c=this._map.getBounds().pad(.1);return this._paths.map(function(d){var e=b._getDirectionPoints(d,a).filter(function(a){return c.contains(a.latLng)});
return GMap.featureGroup(b._buildSymbols(d,a.symbolFactory,e))})},_draw:function(){var a=this;this._patterns.map(function(b){return a._getPatternLayers(b)}).forEach(function(b){a.addLayer(GMap.featureGroup(b))})}});GMap.polylineSymbol=function(a,b){return new GMap.PolylineSymbol(a,b)};
var pat1=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})}],pat2=[{offset:0,repeat:10,symbol:GMap.Symbol.dash({pixelSize:-1})}],pat3=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:-1})}],pat4=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#000000",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:0,
pathOptions:{color:"#ff0000",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:1,pathOptions:{color:"#ff0000",weight:2}})}],pat5=[{offset:0,repeat:25,symbol:GMap.Symbol.arrowHead({pixelSize:15,pathOptions:{fillOpacity:1,weight:0}})}],pat6=[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#000000",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:0,pathOptions:{color:"#ff0000",weight:2}})}],g_patterns=[pat1,pat2,pat3,pat4,pat5,pat6];
function _changePatternWithColWeight(a,b,c){for(var d=0;d<a.length;d++)a[d].symbol.options.pathOptions.color=b,a[d].symbol.options.pathOptions.weight=c}
GMap.PolylineJBSymbol=GMap.FeatureGroup.extend({_editIcon:GMap.divIcon({className:"gmap-div-icon gmap-editing-icon"}),options:{},_setControlLatLngs:function(a){this._controlLatLngs=a},_bindMapClick:function(){this._map.on("click",this._onMapClick,this)},_unbindMapClick:function(){this._map.off("click",this._onMapClick,this)},_onMapClick:function(a){},_getNewMarker:function(a,b){return new GMap.marker(a,b)},_addNewMarker:function(a){a=this._getNewMarker(a.latlng,{icon:this._editIcon});this._addToMapAndBindMarker(a);
this._lineMarkers.push(a)},_unbindMarkerEvents:function(a){a.off("drag",this._replot,this);a.dragging.disable()},_bindMarkerEvents:function(a){a.on("drag",this._replot,this);a.dragging.enable()},_addToMapAndBindMarker:function(a){a.addTo(this._map);this.options.readOnly||this._bindMarkerEvents(a)},setCtrlVisible:function(a){var b="block";0==a&&(b="none");for(a=0;a<this._lineMarkers.length;a++)this._lineMarkers[a]._icon.style.display=b},setReadOnly:function(a){this.setCtrlVisible(!a);if(a&&!this.options.readOnly){var b=
"_unbindMarkerEvents";this._unbindMapClick()}else!a&&this.options.readOnly&&(b="_bindMarkerEvents",this._bindMapClick());if("undefined"!==typeof b)for(index in this.options.readOnly=a,this._lineMarkers)this[b](this._lineMarkers[index])},_replot:function(){this._redraw()},_plotExisting:function(){for(var a=0;a<this._controlLatLngs.length;a++)this._addNewMarker({latlng:this._controlLatLngs[a]});this._replot()},clear:function(){this._map&&this.clearLayers()},_redraw:function(){for(var a=[],b=0;b<this._lineMarkers.length;b++){var c=
this._lineMarkers[b].getLatLng();a.push([c.lat,c.lng])}this._paths=this._initPaths(a);this._setControlLatLngs(a);this.redraw()},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._controlLatLngs=[];this._lineMarkers=[];this._setControlLatLngs(a);this._bounds=this._initBounds();this._keyid=this.options.keyid;this._style={};this._style._patterns=this.options.patterns;this._style._patternid=this.options.patternid;
this._style.fill=this.options.color;this._style.stroke=this.options.color;this._style._colors=this.options.colors;this._style.strokeWidth=this.options.weight;this._style.line=this.options.weight;this._style.fillType=this.options.fillType;this._style.outlineOpacity=null!=this.options.outlineOpacity?this.options.outlineOpacity:1;this._sizeArray=null!=this.options.sizeArray?this.options.sizeArray:[[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[100,40],[180,60],[180,60],[180,60],[180,60],[180,
60],[180,60],[180,60],[180,60]]},_initPaths:function(a,b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):Array.isArray(a)?a.reduce(function(a,e){return a.concat(c._initPaths(e,b))},[]):[]},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this);this._plotExisting();this.options.readOnly||
this._bindMapClick();this.setCtrlVisible(this.options.readOnly)},onRemove:function(a){this._map.off("moveend",this.redraw,this);GMap.FeatureGroup.prototype.onRemove.call(this,a);for(var b in this._lineMarkers)this._map.removeLayer(this._lineMarkers[b]);this._lineMarkers=[];this._unbindMapClick();this._map=null},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},redraw:function(){if(this._map){this.clearLayers();
for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].off("click",this._symbolClick,this),this._lineLayers[a].off("contextmenu",this._showMenu,this);this._draw()}},_showMenu:function(a){this._items=[];var b;if(this._map.contextmenu){var c=GMap.extend({relatedTarget:this},a);var d=this._map.mouseEventToContainerPoint(a.originalEvent);this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems();var e=0;for(b=this.options.contextmenuItems.length;e<b;e++)a=this.options.contextmenuItems[e],
this._items.push(this._map.contextmenu.insertItem(a,a.index));this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(d,c)}},_hideContextMenu:function(){var a;var b=0;for(a=this._items.length;b<a;b++)this._map.contextmenu.removeItem(this._items[b]);this._items.length=0;this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()},_symbolClick:function(a){this._map.drawHelper.showEditPage(1,this._keyid,this)},_getFillPattern:function(a){var b=a.fillType,
c=new GMap.StripePattern({spaceOpacity:1,angle:60});if("fillByHline"==b)return b=new GMap.PatternPath({d:"M0 4 L8 4  Z",fill:!0,weight:1,color:a.stroke}),a=new GMap.Pattern({width:8,height:8}),a.addShape(b),a.addTo(this._map),a;if("fillByVline"==b)return c=new GMap.PatternPath({d:"M4 0 L4 8 Z",fill:!0,weight:1,color:a.stroke}),a=new GMap.Pattern({width:8,height:8}),a.addShape(c),a.addTo(this._map),a;if("fillByXieline"==b)return b=new GMap.PatternPath({d:"M0 0 L8 8  Z",fill:!0,weight:1,color:a.stroke}),
a=new GMap.Pattern({width:8,height:8}),a.addShape(b),a.addTo(this._map),a;if("fillByAntixieline"==b)return b=new GMap.PatternPath({d:"M0 8 L8 0  Z",fill:!0,weight:1,color:a.stroke}),a=new GMap.Pattern({width:8,height:8}),a.addShape(b),a.addTo(this._map),a;if("fillByJinline"==b)return b=new GMap.PatternPath({d:"M0 4 L8 4  Z",fill:!0,weight:1,color:a.stroke}),c=new GMap.PatternPath({d:"M4 0 L4 8 Z",fill:!0,weight:1,color:a.stroke}),a=new GMap.Pattern({width:8,height:8}),a.addShape(b),a.addShape(c),
a.addTo(this._map),a;c.addTo(this._map);return c},_getPatternLayers:function(){var a=this;this._map.getBounds().pad(.1);var b={color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity};return this._paths.map(function(c){c=a._getPolyFromPos(a._keyid,c);for(var d=[],e=0;e<c.length;e++)if(2031==a._keyid||2055==a._keyid||2056==a._keyid||2057==a._keyid||2100==a._keyid||2101==a._keyid||2072==a._keyid)if(null==a._style._patterns)d.push(GMap.polyline(c[e],b));else{var f=GMap.polylineSymbol(c[e],
{patterns:a._style._patterns});d.push(f)}else if(2071==a._keyid)null==a._style._patterns||0!=e?d.push(GMap.polyline(c[e],b)):(f=GMap.polylineSymbol(c[e],{patterns:a._style._patterns}),d.push(f));else if(2073==a._keyid)0==e?(f=GMap.polylineSymbol(c[e],{patterns:g_patterns[0]}),d.push(f)):d.push(GMap.polyline(c[e],b));else if(2150==a._keyid||2151==a._keyid||2152==a._keyid||2153==a._keyid)f=g_patterns[a._keyid-2150+2],_changePatternWithColWeight(f,a._style.stroke,a._style.strokeWidth),f=GMap.polylineSymbol(c[e],
{patterns:f}),d.push(f),2152==a._keyid&&d.push(GMap.polyline(c[e],b));else if(2032==a._keyid||2034==a._keyid||2052==a._keyid)d.push(GMap.polyline(c[e],b));else if(2033==a._keyid||2053==a._keyid||2054==a._keyid)d.push(GMap.polyline(c[e],b)),e!=c.length-1&&(f=[],f.push(c[e][c[e].length-1]),f.push(c[e+1][0]),f=GMap.polylineSymbol(f,{patterns:a._style._patterns}),d.push(f));else if(2035==a._keyid||2036==a._keyid||2037==a._keyid||2038==a._keyid)0==e?(f=distanceBetween(c[e][0],c[e][1]),f=GMap.circle(c[e][0],
{radius:f,fill:!1,color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(f)):d.push(GMap.polyline(c[e],b));else if(2039==a._keyid)4>e?(f=distanceBetween(c[e][0],c[e][1]),f=GMap.circle(c[e][0],{radius:f,fill:!1,color:a._style.stroke,weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(f)):d.push(GMap.polyline(c[e],b));else if(2040==a._keyid)if(0==e%6)f=distanceBetween(c[e][0],c[e][1]),f=GMap.circle(c[e][0],{radius:f,fill:!1,color:a._style.stroke,
weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}),d.push(f);else if(5!=e%6)d.push(GMap.polyline(c[e],b));else if(null==a._style._patterns)d.push(GMap.polyline(c[e],b));else{f=a._style._patterns;for(var k=0;k<f.length;k++)f[k].symbol.options.pathOptions.color=a._style.stroke;b.patterns=f;f=GMap.polylineSymbol(c[e],b);d.push(f)}else if(2041==a._keyid||2042==a._keyid||2043==a._keyid)0==e?(f=a._createPolygonWithPattern(c[e],a._style),d.push(f)):d.push(GMap.polyline(c[e],b));else if(2044==
a._keyid)d.push(GMap.polyline(c[e],{color:a._style._colors[e%2],weight:a._style.strokeWidth,opacity:a._style.outlineOpacity}));else if(2061==a._keyid||2060==a._keyid||2004==a._keyid||2006==a._keyid||2003==a._keyid||2007==a._keyid||2102==a._keyid||2103==a._keyid||2104==a._keyid||2105==a._keyid)f=a._createPolygonWithPattern(c[e],a._style),d.push(f);return GMap.featureGroup(d)})},_createPolygonWithPattern:function(a,b){var c=this._map.getRenderer(this),d=this._getFillPattern(b);return"fillByNone"==b.fillType?
GMap.polygon(a,{fill:!1,color:b.stroke,weight:b.strokeWidth,opacity:b.outlineOpacity}):"fillByColor"==b.fillType?GMap.polygon(a,{fill:!0,color:b.stroke,weight:b.strokeWidth,opacity:b.outlineOpacity}):c._ctx?GMap.polygonFill(a,{color:b.stroke,weight:b.strokeWidth,fillType:b.fillType,bgFillColor:b.stroke,fillOpacity:b.outlineOpacity}):GMap.polygon(a,{color:b.stroke,weight:b.strokeWidth,fillPattern:d,fillOpacity:b.outlineOpacity})},_getPolyFromPos:function(a,b){var c=[],d=b.length,e;var f=[];for(e=0;e<
d;e++)f[e]=this._map.latLngToLayerPoint(b[e]);d=!1;e=[];var k=[25];if(2031==a||2055==a||2056==a||2057==a||2061==a){if(3<=f.length){for(d=0;3>d;d++)e.push(f[d].x),e.push(f[d].y);d=!0}}else if(2032==a||2033==a||2052==a||2053==a||2054==a||2006==a||2007==a||2104==a){if(3<=f.length){for(d=0;d<f.length;d++)e.push(f[d].x),e.push(f[d].y);d=!0}}else if(2034==a||2060==a||2004==a||2003==a||2100==a||2072==a||2073==a||2105==a||2103==a){if(2<=f.length){for(d=0;2>d;d++)e.push(f[d].x),e.push(f[d].y);d=!0}}else if(2035==
a||2036==a||2037==a||2038==a||2039==a||2040==a||2041==a||2042==a||2043==a||2044==a||2101==a||2102==a||2071==a||2150==a||2151==a||2152==a||2153==a||2154==a){for(d=0;d<f.length;d++)e.push(f[d].x),e.push(f[d].y);d=!0}if(1==d){if(2041==a||2042==a||2043==a||2044==a)d=this._map.getZoom(),d=this._sizeArray[d],k[0]=d[0],k[1]=d[1];b=H5JB_getJBArray(a,e,k);f=[];if(2030>a){for(d=0;d<b.length;d++)a=this._map.layerPointToLatLng(b[d]),c.push(a);f.push(c)}else for(d=0;d<b.length;d++){c=[];e=b[d];for(k=0;k<e.length;k++)a=
this._map.layerPointToLatLng(e[k]),c.push(a);f.push(c)}return f}return b},_draw:function(){this._lineLayers=this._getPatternLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].on("click",this._symbolClick,this),this._lineLayers[a].on("contextmenu",this._showMenu,this);this.addLayer(GMap.featureGroup(this._lineLayers))},_setStyle:function(a){null!=a.fillType&&(this._style.fillType=a.fillType);null!=a.outlineColor&&(this._style.stroke=a.outlineColor);null!=a.outlineWidth&&(this._style.strokeWidth=
a.outlineWidth);null!=a.opacity&&(this._style.outlineOpacity=a.opacity);null!=a.lineType&&(this._style._patterns="dash"==a.lineType?g_patterns[0]:"point"==a.lineType?g_patterns[1]:"ptline"==a.lineType?g_patterns[2]:null);if(null!=this._style._patterns){a=this._style._patterns;for(var b=0;b<a.length;b++)a[b].symbol.options.pathOptions.color=this._style.stroke,a[b].symbol.options.pathOptions.weight=this._style.strokeWidth}this.redraw()},changeControlPoints:function(a){for(var b=0;b<this._lineMarkers.length;b++)this._lineMarkers[b].setLatLng(a[b]);
this._paths=this._initPaths(a);this._setControlLatLngs(a);this.redraw()}});GMap.polylineJBSymbol=function(a,b){return new GMap.PolylineJBSymbol(a,b)};
GMap.PointJBSymbol=GMap.FeatureGroup.extend({_editIcon:GMap.divIcon({className:"gmap-div-icon gmap-editing-icon"}),options:{},_setControlLatLngs:function(a){this._controlLatLngs=a},_bindMapClick:function(){this._map.on("click",this._onMapClick,this)},_unbindMapClick:function(){this._map.off("click",this._onMapClick,this)},_onMapClick:function(a){},_getNewMarker:function(a,b){return new GMap.marker(a,b)},_addNewMarker:function(a){a=this._getNewMarker(a.latlng,{icon:this._editIcon});this._addToMapAndBindMarker(a);
this._lineMarkers.push(a)},_unbindMarkerEvents:function(a){a.off("drag",this._replot,this);a.dragging.disable()},_bindMarkerEvents:function(a){a.on("drag",this._replot,this);a.dragging.enable()},_addToMapAndBindMarker:function(a){a.addTo(this._map);this.options.readOnly||this._bindMarkerEvents(a)},_replot:function(){this._redraw()},_plotExisting:function(){for(var a=0;a<this._controlLatLngs.length;a++)this._addNewMarker({latlng:this._controlLatLngs[a]});this._replot()},clear:function(){this._map&&
this.clearLayers()},_redraw:function(){for(var a=[],b=0;b<this._lineMarkers.length;b++){var c=this._lineMarkers[b].getLatLng();a.push([c.lat,c.lng])}this._paths=this._initPaths(a);this._setControlLatLngs(a);this.redraw()},initialize:function(a,b){GMap.FeatureGroup.prototype.initialize.call(this);GMap.Util.setOptions(this,b);this._map=null;this._paths=this._initPaths(a);this._controlLatLngs=[];this._lineMarkers=[];this._setControlLatLngs(a);this._bounds=this._initBounds();this._keyid=this.options.keyid;
this._patterns=this.options.patterns;this._color=this.options.color;this._colors=this.options.colors;this._weight=this.options.weight;this._sizeArray=null!=this.options.sizeArray?this.options.sizeArray:[[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[60,20],[100,40],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60],[180,60]]},_initPaths:function(a,b){var c=this;return isCoordArray(a)?[b?a.concat([a[0]]):a]:a instanceof GMap.Polyline?this._initPaths(a.getLatLngs(),a instanceof GMap.Polygon):
Array.isArray(a)?a.reduce(function(a,e){return a.concat(c._initPaths(e,b))},[]):[]},setPaths:function(a){this._paths=this._initPaths(a);this._bounds=this._initBounds();this.redraw()},onAdd:function(a){this._map=a;this._draw();this._map.on("moveend",this.redraw,this);this._plotExisting();this.options.readOnly||this._bindMapClick()},onRemove:function(a){this._map.off("moveend",this.redraw,this);GMap.FeatureGroup.prototype.onRemove.call(this,a);for(var b in this._lineMarkers)this._map.removeLayer(this._lineMarkers[b]);
this._lineMarkers=[];this._unbindMapClick();this._map=null},_initBounds:function(){var a=this._paths.reduce(function(a,c){return a.concat(c)},[]);return GMap.latLngBounds(a)},getBounds:function(){return this._bounds},redraw:function(){if(this._map){this.clearLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].off("click",this._symbolClick,this);this._draw()}},_symbolClick:function(a){alert("clicked:"+this._keyid);this._map.drawHelper.showEditPage(0,this._keyid,this)},_getPatternLayers:function(){var a=
this;this._map.getBounds().pad(.1);return this._paths.map(function(b){b=a._getPolyFromPos(a._keyid,b);for(var c=[],d=0;d<b.length;d++)c.push(GMap.polyline(b[d],{color:a._colors[d%2],weight:a._weight}));return GMap.featureGroup(c)})},_getPolyFromPos:function(a,b){a=b.length;var c;for(c=0;c<a;c++)this._map.latLngToLayerPoint(b[c])},_draw:function(){this._lineLayers=this._getPatternLayers();for(var a=0;a<this._lineLayers.length;a++)this._lineLayers[a].on("click",this._symbolClick,this);this.addLayer(GMap.featureGroup(this._lineLayers))}});
GMap.pointJBSymbol=function(a,b){return new GMap.PointJBSymbol(a,b)};GMap.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1E-4,G_PTWenziId:141,G_PTWenziLine:163};GMap.PlotUtils={};GMap.PlotUtils.distance=function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))};GMap.PlotUtils.wholeDistance=function(a){for(var b=0,c=0;c<a.length-1;c++)b+=GMap.PlotUtils.distance(a[c],a[c+1]);return b};GMap.PlotUtils.getBaseLength=function(a){return Math.pow(GMap.PlotUtils.wholeDistance(a),.99)};
GMap.PlotUtils.mid=function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]};GMap.PlotUtils.getCircleCenterOfThreePoints=function(a,b,c){var d=[(a[0]+b[0])/2,(a[1]+b[1])/2],e=[(a[0]+c[0])/2,(a[1]+c[1])/2];return GMap.PlotUtils.getIntersectPoint(d,[d[0]-a[1]+b[1],d[1]+a[0]-b[0]],e,[e[0]-a[1]+c[1],e[1]+a[0]-c[0]])};
GMap.PlotUtils.getIntersectPoint=function(a,b,c,d){if(a[1]==b[1])return d=(d[0]-c[0])/(d[1]-c[1]),b=d*(a[1]-c[1])+c[0],c=a[1],[b,c];if(c[1]==d[1])return b=(b[0]-a[0])/(b[1]-a[1]),b=b*(c[1]-a[1])+a[0],c=c[1],[b,c];b=(b[0]-a[0])/(b[1]-a[1]);d=(d[0]-c[0])/(d[1]-c[1]);c=(b*a[1]-a[0]-d*c[1]+c[0])/(b-d);b=b*c-b*a[1]+a[0];return[b,c]};
GMap.PlotUtils.getAzimuth=function(a,b){var c,d=Math.asin(Math.abs(b[1]-a[1])/GMap.PlotUtils.distance(a,b));b[1]>=a[1]&&b[0]>=a[0]?c=d+Math.PI:b[1]>=a[1]&&b[0]<a[0]?c=GMap.Constants.TWO_PI-d:b[1]<a[1]&&b[0]<a[0]?c=d:b[1]<a[1]&&b[0]>=a[0]&&(c=Math.PI-d);return c};GMap.PlotUtils.getAngleOfThreePoints=function(a,b,c){a=GMap.PlotUtils.getAzimuth(b,a)-GMap.PlotUtils.getAzimuth(b,c);return 0>a?a+GMap.Constants.TWO_PI:a};
GMap.PlotUtils.isClockWise=function(a,b,c){return(c[1]-a[1])*(b[0]-a[0])>(b[1]-a[1])*(c[0]-a[0])};GMap.PlotUtils.getPointOnLine=function(a,b,c){return[b[0]+a*(c[0]-b[0]),b[1]+a*(c[1]-b[1])]};GMap.PlotUtils.getCubicValue=function(a,b,c,d,e){a=Math.max(Math.min(a,1),0);var f=1-a,k=a*a,g=k*a,h=f*f,l=h*f;return[l*b[0]+3*h*a*c[0]+3*f*k*d[0]+g*e[0],l*b[1]+3*h*a*c[1]+3*f*k*d[1]+g*e[1]]};
GMap.PlotUtils.getThirdPoint=function(a,b,c,d,e){a=GMap.PlotUtils.getAzimuth(a,b);c=e?a+c:a-c;return[b[1]+d*Math.sin(c),b[0]+d*Math.cos(c)]};GMap.PlotUtils.getArcPoints=function(a,b,c,d){var e=[],f=d-c;f=0>f?f+GMap.Constants.TWO_PI:f;for(var k=0;k<=GMap.Constants.FITTING_COUNT;k++){var g=c+f*k/GMap.Constants.FITTING_COUNT;d=a[0]+b*Math.cos(g);g=a[1]+b*Math.sin(g);e.push([d,g])}return e};
GMap.PlotUtils.getBisectorNormals=function(a,b,c,d){var e=GMap.PlotUtils.getNormal(b,c,d),f=Math.sqrt(e[0]*e[0]+e[1]*e[1]),k=e[0]/f;e=e[1]/f;var g=GMap.PlotUtils.distance(b,c),h=GMap.PlotUtils.distance(c,d);f>GMap.Constants.ZERO_TOLERANCE?GMap.PlotUtils.isClockWise(b,c,d)?(d=a*g,f=c[0]-d*e,g=c[1]+d*k,b=[f,g],d=a*h,f=c[0]+d*e,g=c[1]-d*k,a=[f,g]):(d=a*g,f=c[0]+d*e,g=c[1]-d*k,b=[f,g],d=a*h,f=c[0]-d*e,g=c[1]+d*k,a=[f,g]):(f=c[0]+a*(b[0]-c[0]),g=c[1]+a*(b[1]-c[1]),b=[f,g],f=c[0]+a*(d[0]-c[0]),g=c[1]+a*
(d[1]-c[1]),a=[f,g]);return[b,a]};GMap.PlotUtils.getNormal=function(a,b,c){var d=a[0]-b[0];a=a[1]-b[1];var e=Math.sqrt(d*d+a*a),f=c[0]-b[0];b=c[1]-b[1];c=Math.sqrt(f*f+b*b);return[d/e+f/c,a/e+b/c]};GMap.PlotUtils.pointsTolatlngs=function(a){for(var b=[],c=a.length,d=0;d<c;d++)b.push([a[d][1],a[d][0]]);return b};
GMap.Curve2=GMap.Polyline.extend({t:.3,initialize:function(a,b){GMap.setOptions(this,b);this.points=a;this._bounds=new GMap.LatLngBounds;this.generate(a)},options:{smoothFactor:1E-5},generate:function(a){var b=a.length;2>b||(this._latlngs=2==b?this._convertLatLngs(GMap.PlotUtils.pointsTolatlngs(a)):this._convertLatLngs(GMap.PlotUtils.pointsTolatlngs(GMap.PlotUtils.getCurvePoints(this.t,a))))},setLatLngs:function(a){this.generate(a);return this.redraw()},_convertLatLngs:function(a){for(var b=[],c=
GMap.Polyline._flat(a),d=0,e=a.length;d<e;d++)c?(b[d]=GMap.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b}});GMap.curve2=function(a,b){return new GMap.Curve2(a,b)};
GMap.PlotUtils.getCurvePoints=function(a,b){for(var c=[GMap.PlotUtils.getLeftMostControlPoint(b)],d=0;d<b.length-2;d++){var e=b[d],f=b[d+1];e=GMap.PlotUtils.getBisectorNormals(a,e,f,b[d+2]);c=c.concat(e)}a=GMap.PlotUtils.getRightMostControlPoint(b);c.push(a);var k=[];for(d=0;d<b.length-1;d++){e=b[d];f=b[d+1];k.push(e);for(a=0;a<GMap.Constants.FITTING_COUNT;a++){var g=GMap.PlotUtils.getCubicValue(a/GMap.Constants.FITTING_COUNT,e,c[2*d],c[2*d+1],f);k.push(g)}k.push(f)}return k};
GMap.PlotUtils.getLeftMostControlPoint=function(a){var b=a[0],c=a[1],d=a[2];a=GMap.PlotUtils.getBisectorNormals(0,b,c,d)[0];d=GMap.PlotUtils.getNormal(b,c,d);if(Math.sqrt(d[0]*d[0]+d[1]*d[1])>GMap.Constants.ZERO_TOLERANCE){d=GMap.PlotUtils.mid(b,c);var e=b[0]-d[0],f=b[1]-d[1];c=2/GMap.PlotUtils.distance(b,c);b=-c*f;c*=e;e=2*b*c;f=a[0]-d[0];var k=a[1]-d[1];a=d[0]+(b*b-c*c)*f+e*k;d=d[1]+e*f+(c*c-b*b)*k}else a=b[0]+t*(c[0]-b[0]),d=b[1]+t*(c[1]-b[1]);return[a,d]};
GMap.PlotUtils.getRightMostControlPoint=function(a){var b=a.length,c=a[b-3],d=a[b-2];b=a[b-1];a=GMap.PlotUtils.getBisectorNormals(0,c,d,b)[1];c=GMap.PlotUtils.getNormal(c,d,b);if(Math.sqrt(c[0]*c[0]+c[1]*c[1])>GMap.Constants.ZERO_TOLERANCE){c=GMap.PlotUtils.mid(d,b);var e=b[0]-c[0],f=b[1]-c[1];b=2/GMap.PlotUtils.distance(d,b);d=-b*f;b*=e;e=2*d*b;f=a[0]-c[0];var k=a[1]-c[1];a=c[0]+(d*d-b*b)*f+e*k;c=c[1]+e*f+(b*b-d*d)*k}else a=b[0]+t*(d[0]-b[0]),c=b[1]+t*(d[1]-b[1]);return[a,c]};
GMap.PlotUtils.getBezierPoints=function(a){if(2>=a.length)return a;for(var b=[],c=a.length-1,d=0;1>=d;d+=.01){for(var e=y=0,f=0;f<=c;f++){var k=GMap.PlotUtils.getBinomialFactor(c,f),g=Math.pow(d,f),h=Math.pow(1-d,c-f);e+=k*g*h*a[f][0];y+=k*g*h*a[f][1]}b.push([e,y])}b.push(a[c]);return b};GMap.PlotUtils.getBinomialFactor=function(a,b){return GMap.PlotUtils.getFactorial(a)/(GMap.PlotUtils.getFactorial(b)*GMap.PlotUtils.getFactorial(a-b))};
GMap.PlotUtils.getFactorial=function(a){if(1>=a)return 1;if(2==a)return 2;if(3==a)return 6;if(4==a)return 24;if(5==a)return 120;for(var b=1,c=1;c<=a;c++)b*=c;return b};GMap.PlotUtils.getQBSplinePoints=function(a){if(2>=a.length)return a;var b=[],c=a.length-2-1;b.push(a[0]);for(var d=0;d<=c;d++)for(var e=0;1>=e;e+=.05){for(var f=y=0,k=0;2>=k;k++){var g=GMap.PlotUtils.getQuadricBSplineFactor(k,e);f+=g*a[d+k][0];y+=g*a[d+k][1]}b.push([f,y])}b.push(a[a.length-1]);return b};
GMap.PlotUtils.getQuadricBSplineFactor=function(a,b){return 0==a?Math.pow(b-1,2)/2:1==a?(-2*Math.pow(b,2)+2*b+1)/2:2==a?Math.pow(b,2)/2:0};
GMap.Curve3=GMap.Path.extend({options:{},initialize:function(a,b){GMap.setOptions(this,b);this._initialUpdate=!0;this._setPath(a)},getPath:function(){return this._coords},setPath:function(a){this._setPath(a);return this.redraw()},getBounds:function(){return this._bounds},_setPath:function(a){this._coords=a;this._bounds=this._computeBounds()},_computeBounds:function(){for(var a=new GMap.LatLngBounds,b,c,d,e=0;e<this._coords.length;e++)if(d=this._coords[e],"string"==typeof d||d instanceof String)c=
d;else if("H"==c)a.extend([b.lat,d[0]]),b=new GMap.latLng(b.lat,d[0]);else if("V"==c)a.extend([d[0],b.lng]),b=new GMap.latLng(d[0],b.lng);else if("C"==c){var f=new GMap.latLng(d[0],d[1]);d=this._coords[++e];var k=new GMap.latLng(d[0],d[1]);d=this._coords[++e];d=new GMap.latLng(d[0],d[1]);a.extend(f);a.extend(k);a.extend(d);d.controlPoint1=f;d.controlPoint2=k;b=d}else if("S"==c){k=new GMap.latLng(d[0],d[1]);d=this._coords[++e];d=new GMap.latLng(d[0],d[1]);f=b;if(b.controlPoint2){f=b.lat-b.controlPoint2.lat;
var g=b.lng-b.controlPoint2.lng;f=new GMap.latLng(b.lat+f,b.lng+g)}a.extend(f);a.extend(k);a.extend(d);d.controlPoint1=f;d.controlPoint2=k;b=d}else"Q"==c?(k=new GMap.latLng(d[0],d[1]),d=this._coords[++e],d=new GMap.latLng(d[0],d[1]),a.extend(k),a.extend(d),d.controlPoint=k,b=d):"T"==c?(d=new GMap.latLng(d[0],d[1]),k=b,b.controlPoint&&(f=b.lat-b.controlPoint.lat,g=b.lng-b.controlPoint.lng,k=new GMap.latLng(b.lat+f,b.lng+g)),a.extend(k),a.extend(d),d.controlPoint=k,b=d):(a.extend(d),b=new GMap.latLng(d[0],
d[1]));return a},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updatecurve(this)},_project:function(){this._points=[];for(var a=0;a<this._coords.length;a++){var b=this._coords[a];if("string"==typeof b||b instanceof String){this._points.push(b);var c=b}else{switch(b.length){case 2:var d=this._map.latLngToLayerPoint(b);var e=b;break;case 1:"H"==c?(d=this._map.latLngToLayerPoint([e[0],b[0]]),e=[e[0],b[0]]):
(d=this._map.latLngToLayerPoint([b[0],e[1]]),e=[b[0],e[1]])}this._points.push(d)}}},_curvePointsToPath:function(a){for(var b,c,d="",e=0;e<a.length;e++)if(b=a[e],"string"==typeof b||b instanceof String)c=b,d+=c;else switch(c){case "H":d+=b.x+" ";break;case "V":d+=b.y+" ";break;default:d+=b.x+","+b.y+" "}return d||"M0 0"},_containsPoint:function(a){return this._bounds.contains(this._map.layerPointToLatLng(a))}});GMap.curve3=function(a,b){return new GMap.Curve3(a,b)};
GMap.SVG.include({_updatecurve:function(a){this._setPath(a,a._curvePointsToPath(a._points));if(a.options.animate){var b=a._path,c=b.getTotalLength();a.options.dashArray||(b.style.strokeDasharray=c+" "+c);a._initialUpdate&&(b.animate([{strokeDashoffset:c},{strokeDashoffset:0}],a.options.animate),a._initialUpdate=!1)}}});
GMap.Canvas.include({_updatecurve:function(a){var b=new Path2D(a._curvePointsToPath(a._points));this._curveFillStroke(b,this._ctx,a)},_curveFillStroke:function(a,b,c){var d=c.options;d.fill&&(b.globalAlpha=d.fillOpacity,b.fillStyle=d.fillColor||d.color,b.fill(a,d.fillRule||"evenodd"));d.stroke&&0!==d.weight&&(b.setLineDash&&b.setLineDash(c.options&&c.options._dashArray||[]),b.globalAlpha=d.opacity,b.lineWidth=d.weight,b.strokeStyle=d.color,b.lineCap=d.lineCap,b.lineJoin=d.lineJoin,b.stroke(a))}});
GMap.Draw.H5JBLineSymbol=GMap.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:GMap.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new GMap.DivIcon({iconSize:new GMap.Point(8,8),className:"gmap-div-icon gmap-editing-icon"}),touchIcon:new GMap.DivIcon({iconSize:new GMap.Point(20,20),className:"gmap-div-icon gmap-editing-icon gmap-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4E3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,
fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2E3,factor:1,maxPoints:0},initialize:function(a,b){GMap.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=GMap.drawLocal.draw.handlers.polyline.error;b&&b.drawError&&(b.drawError=GMap.Util.extend({},this.options.drawError,b.drawError));this.type=GMap.Draw.H5JBLineSymbol.TYPE;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){GMap.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._markers=[],this._markerGroup=new GMap.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new GMap.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=GMap.marker(this._map.getCenter(),{icon:GMap.divIcon({className:"gmap-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,
this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){GMap.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;
this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,
this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(1>=this._markers.length)){var a=this._markers.pop(),b=this._poly,c=b.getLatLngs(),d=c.splice(-1,1)[0];this._poly.setLatLngs(c);this._markerGroup.removeLayer(a);2>b.getLatLngs().length&&this._map.removeLayer(b);this._vertexChanged(d,!1)}},addVertex:function(a){2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(a)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(a)),
this._poly.addLatLng(a),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(a,!0))},completeShape:function(){1>=this._markers.length||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var a=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs();a=this._poly.newLatLngIntersects(a[a.length-1]);!this.options.allowIntersection&&a||!this._shapeIsValid()?this._showErrorTooltip():
(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(a){var b=this._map.mouseEventToLayerPoint(a.originalEvent),c=this._map.layerPointToLatLng(b);this._currentLatLng=c;this._updateTooltip(c);this._updateGuide(b);this._mouseMarker.setLatLng(c);GMap.DomEvent.preventDefault(a.originalEvent)},_vertexChanged:function(a,b){this._map.fire(GMap.Draw.Event.DRAWVERTEX,
{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(a,b);this._clearGuides();this._updateTooltip()},_onMouseDown:function(a){this._clickHandled||this._touchHandled||this._disableMarkers||(this._onMouseMove(a),this._clickHandled=!0,this._disableNewMarkers(),a=a.originalEvent,this._startPoint.call(this,a.clientX,a.clientY))},_startPoint:function(a,b){this._mouseDownOrigin=GMap.point(a,b)},_onMouseUp:function(a){var b=a.originalEvent;this._endPoint.call(this,b.clientX,
b.clientY,a);this._clickHandled=null},_endPoint:function(a,b,c){this._mouseDownOrigin&&(a=GMap.point(a,b).distanceTo(this._mouseDownOrigin),b=this._calculateFinishDistance(c.latlng),1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):10>b&&GMap.Browser.touch?this._finishShape():Math.abs(a)<9*(window.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers());this._mouseDownOrigin=null},_onTouch:function(a){var b=a.originalEvent;
if(b.touches&&b.touches[0]&&!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){var c=b.touches[0].clientX;b=b.touches[0].clientY;this._disableNewMarkers();this._touchHandled=!0;this._startPoint.call(this,c,b);this._endPoint.call(this,c,b,a);this._touchHandled=null}this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(a){if(0<this._markers.length){if(this.type===GMap.Draw.Polyline.TYPE)var b=this._markers[this._markers.length-
1];else if(this.type===GMap.Draw.Polygon.TYPE)b=this._markers[0];else return Infinity;b=this._map.latLngToContainerPoint(b.getLatLng());a=new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});a=this._map.latLngToContainerPoint(a.getLatLng());b=b.distanceTo(a)}else b=Infinity;return b},_updateFinishHandler:function(){var a=this._markers.length;if(1<a)this._markers[a-1].on("click",this._finishShape,this);2<a&&this._markers[a-2].off("click",this._finishShape,this)},_createMarker:function(a){a=
new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});this._markerGroup.addLayer(a);return a},_updateGuide:function(a){var b=this._markers?this._markers.length:0;0<b&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[b-1].getLatLng()),a))},_updateTooltip:function(a){var b=this._getTooltipText();a&&this._tooltip.updatePosition(a);this._errorShown||this._tooltip.updateContent(b)},_drawGuide:function(a,
b){var c=Math.floor(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))),d=this.options.guidelineDistance,e=this.options.maxGuideLineLength;d=c>e?c-e:d;this._guidesContainer||(this._guidesContainer=GMap.DomUtil.create("div","gmap-draw-guides",this._overlayPane));for(;d<c;d+=this.options.guidelineDistance){e=d/c;e={x:Math.floor(a.x*(1-e)+e*b.x),y:Math.floor(a.y*(1-e)+e*b.y)};var f=GMap.DomUtil.create("div","gmap-draw-guide-dash",this._guidesContainer);f.style.backgroundColor=this._errorShown?this.options.drawError.color:
this.options.shapeOptions.color;GMap.DomUtil.setPosition(f,e)}},_updateGuideColor:function(a){if(this._guidesContainer)for(var b=0,c=this._guidesContainer.childNodes.length;b<c;b++)this._guidesContainer.childNodes[b].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a=this.options.showLength;0===this._markers.length?a={text:GMap.drawLocal.draw.handlers.polyline.tooltip.start}:
(a=a?this._getMeasurementString():"",a=1===this._markers.length?{text:GMap.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:GMap.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a});return a},_updateRunningMeasure:function(a,b){var c=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(c-=b?2:1,a=GMap.GeometryUtil.isVersion07x()?a.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(a,this._markers[c].getLatLng())*(this.options.factor||
1),this._measurementRunningTotal+=a*(b?1:-1))},_getMeasurementString:function(){var a=this._currentLatLng,b=this._markers[this._markers.length-1].getLatLng();a=GMap.GeometryUtil.isVersion07x()?b&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(b)*(this.options.factor||1):this._measurementRunningTotal||0:b&&a?this._measurementRunningTotal+this._map.distance(a,b)*(this.options.factor||1):this._measurementRunningTotal||0;return GMap.GeometryUtil.readableDistance(a,this.options.metric,this.options.feet,
this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(GMap.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();
this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&
this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=this._poly.getLatLngs(),b=this.options.shapeOptions.keyid,c=this.options.name;a=2053==b?GMap.polylineJBSymbol(a,{keyid:b,name:c,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8,patterns:[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:0,pathOptions:{color:"#000000",
weight:2}})},{offset:0,repeat:25,symbol:GMap.Symbol.dash({pixelSize:1,pathOptions:{color:"#000000",weight:2}})}]}):2054==b?GMap.polylineJBSymbol(a,{keyid:b,name:c,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8,patterns:[{offset:12,repeat:25,symbol:GMap.Symbol.dash({pixelSize:10,pathOptions:{color:"#f00",weight:2}})}]}):GMap.polylineJBSymbol(a,{keyid:b,name:c,color:"#ff0000",colors:["#ff0000","#0000ff"],weight:2,outlineOpacity:.8,fillType:this.options.shapeOptions.fillType});
GMap.Draw.Feature.prototype._fireCreatedEvent.call(this,a);null!=this.options.helper&&this.options.helper.trigger("sym_added",a)}});
GMap.Draw.HandLine=GMap.Draw.SimpleShape.extend({statics:{TYPE:"handline"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,clickable:!0}},initialize:function(a,b){this.type=GMap.Draw.HandLine.TYPE;this.pts=[];GMap.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?(this.pts.push(a),this._shape.setLatLngs(this.pts)):(this._shape=new GMap.Polyline([],this.options.shapeOptions),this._map.addLayer(this._shape),this.pts.push(this._startLatLng))},
_fireCreatedEvent:function(){var a=new GMap.Polyline(this.pts,this.options.shapeOptions);GMap.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){a=a.latlng;this._isDrawing&&this._drawShape(a)}});
GMap.Draw.PointSymbol=GMap.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new GMap.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(a,b){this.type=GMap.Draw.Marker.TYPE;this._initialLabelText=GMap.drawLocal.draw.handlers.marker.tooltip.start;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){GMap.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=
GMap.marker(this._map.getCenter(),{icon:GMap.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){GMap.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&
(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){a=a.latlng;this._tooltip.updatePosition(a);this._mouseMarker.setLatLng(a);this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",
this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(a){return new GMap.Marker(a,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_onTouch:function(a){this._onMouseMove(a);this._onClick()},_fireCreatedEvent:function(){var a=this._marker.getLatLng(),b=this._marker.options.icon.options.keyid,c=this._marker.options.icon.options.helper,
d=this._marker.options.icon.options.style;a=[a.lat,a.lng];if(b!=GMap.Constants.G_PTWenziId&&b!=GMap.Constants.G_PTWenziLine){var e=c.drawSymbol(b,d),f=c.geticonAnchorFromStyle(d,b);b=GMap.canvasIcon({canvas:e,iconSize:[d.symbolWidth,d.symbolHeight],iconAnchor:f,keyid:b,style:d,name:this._marker.options.icon.options.name,className:"myMarker"})}else b=new GMap.GDivLineIcon({html:'<font size="'+d.font_size+'" color="'+d.textcolor+'">'+d.label+"</font>",className:"my-div-icon",iconSize:[d.symbolWidth,
d.symbolHeight],keyid:b,style:d,name:this._marker.options.icon.options.name});b=GMap.marker(a,{icon:b,name:this._marker.options.icon.options.name,contextmenu:!0});GMap.Draw.Feature.prototype._fireCreatedEvent.call(this,b);c.trigger("sym_added",b)}});
GMap.LabelOverlay=GMap.Layer.extend({initialize:function(a,b,c,d){this._latlng=a;this._angle=b;this._distance=c;GMap.Util.setOptions(this,d)},options:{offset:null,cssClass:"label-overlay",annoText:""},onAdd:function(a){this._map=a;if(this._angle&&0<this._distance){var b=this._latlng.lat,c=this._latlng.lng,d=Math.PI/180,e=this._distance/6371E3/d,f=a.project([b+e,c]),k=a.project([b-e,c]);f=f.add(k).divideBy(2);k=a.unproject(f).lat;var g=Math.acos((Math.cos(e*d)-Math.sin(b*d)*Math.sin(k*d))/(Math.cos(b*
d)*Math.cos(k*d)))/d;if(isNaN(g)||0===g)g=e/Math.cos(Math.PI/180*b);b=isNaN(g)?0:f.x-a.project([k,c-g]).x;this.options.offset={};this.options.offset.x=b*Math.cos(this._angle*d);this.options.offset.y=b*Math.sin(this._angle*d)}this._container||this._initLayout();this._poly=new GMap.GWenziLine([],this.options.shapeOptions);this._map.addLayer(this._poly);this._poly.setTextContainer(this);a.getPanes().overlayPane.appendChild(this._container);a.on("viewreset",this._reset,this);a.on("zoomend",this._reset,
this);if(a.options.zoomAnimation&&a.options.markerZoomAnimation)a.on("zoomanim",this._animateZoom,this);this._reset()},_moveTooltip:function(a){this._reset()},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);a=null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y);GMap.DomUtil.setPosition(this._container,a)},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._container);null!=this._poly&&
(this._map.removeLayer(this._poly),delete this._poly);a.off("viewreset",this._reset,this);a.off("zoomend",this._reset,this);this._map.off("zoomanim",this._animateZoom,this)},_reset:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPos(a)},_setPos:function(a){new GMap.Point(a.x,a.y);var b=this._container.childNodes[0].offsetHeight;var c=this._container.childNodes[0].offsetWidth;b=null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y-
b);GMap.DomUtil.setPosition(this._container,b);null!=this._poly&&(c=new GMap.Point(a.x+this.options.offset.x+c,a.y-this.options.offset.y),c=this._map.layerPointToLatLng(c),a=new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y),a=this._map.layerPointToLatLng(a),b=[],b.push(this._latlng),b.push(a),b.push(c),this._poly._setControlLatLngs(b),this._poly._plotExisting())},_initLayout:function(){var a=document.createElement("div"),b=document.createElement("span");a.className="mapjb-marker-icon-wrapper mapjb-zoom-animated";
b.className="mapjb-marker-iconlabel "+this.options.labelClassName;b.innerHTML=this.options.annoText;a.appendChild(b);b=document.createElement("span");b.className="mapjb-marker-iconlabel "+this.options.labelClassName;b.innerHTML=this.options.annoDetailText;a.appendChild(b);this._container=a;this._showDetailLabel(this.options.showDetailLabel);return a},updateLabel:function(a,b){"DIV"===this._container.nodeName.toUpperCase()&&(this._container.childNodes[0].innerHTML=a,this._container.childNodes[1].innerHTML=
b,this.options.annoText=a)},setLinedit:function(a){this._poly.setEdit(a)},_showDetailLabel:function(a){this._container.childNodes[1].style.visibility=1==a?"":"hidden"},_updateLayout:function(){},_adjustPan:function(){}});
GMap.Draw.GSectionLine=GMap.Draw.Polyline.extend({statics:{TYPE:"polyline"},Poly:GMap.Polyline,initialize:function(a,b){GMap.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=GMap.drawLocal.draw.handlers.polyline.error;b&&b.drawError&&(b.drawError=GMap.Util.extend({},this.options.drawError,b.drawError));this.type=GMap.Draw.H5JBLineSymbol.TYPE;this.callback=b.callback;this._map=a;GMap.Draw.Feature.prototype.initialize.call(this,a,b)},_fireCreatedEvent:function(){var a=
new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);this.callback&&this.callback(this._poly.getLatLngs(),a)}});var Hotline=function(a){if(!(this instanceof Hotline))return new Hotline(a);this._canvas=a="string"===typeof a?document.getElementById(a):a;this._ctx=a.getContext("2d");this._width=a.width;this._height=a.height;this._weight=5;this._outlineWidth=1;this._outlineColor="black";this._min=0;this._max=1;this._data=[];this.palette({0:"green","0.5":"yellow",1:"red"})};
Hotline.prototype={width:function(a){this._width=a;return this},height:function(a){this._height=a;return this},weight:function(a){this._weight=a;return this},outlineWidth:function(a){this._outlineWidth=a;return this},outlineColor:function(a){this._outlineColor=a;return this},palette:function(a){var b=document.createElement("canvas");ctx=b.getContext("2d");gradient=ctx.createLinearGradient(0,0,0,256);b.width=1;b.height=256;for(var c in a)gradient.addColorStop(c,a[c]);ctx.fillStyle=gradient;ctx.fillRect(0,
0,1,256);this._palette=ctx.getImageData(0,0,1,256).data;return this},min:function(a){this._min=a;return this},max:function(a){this._max=a;return this},data:function(a){this._data=a;return this},add:function(a){this._data.push(a);return this},draw:function(){var a=this._ctx;a.globalCompositeOperation="source-over";a.lineCap="round";this._drawOutline(a);this._drawHotline(a);return this},getRGBForValue:function(a){a=4*Math.floor(256*Math.min(Math.max((a-this._min)/(this._max-this._min),0),.999));return[this._palette[a],
this._palette[a+1],this._palette[a+2]]},_drawOutline:function(a){var b,c;if(this._outlineWidth){var d=0;for(b=this._data.length;d<b;d++){var e=this._data[d];a.lineWidth=this._weight+2*this._outlineWidth;var f=1;for(c=e.length;f<c;f++){var k=e[f-1];var g=e[f];a.strokeStyle=this._outlineColor;a.beginPath();a.moveTo(k.x,k.y);a.lineTo(g.x,g.y);a.stroke()}}}},_drawHotline:function(a){var b,c;a.lineWidth=this._weight;var d=0;for(b=this._data.length;d<b;d++){var e=this._data[d];var f=1;for(c=e.length;f<
c;f++){var k=e[f-1];var g=e[f];var h=a.createLinearGradient(k.x,k.y,g.x,g.y);var l=this.getRGBForValue(k.z);var m=this.getRGBForValue(g.z);h.addColorStop(0,"rgb("+l.join(",")+")");h.addColorStop(1,"rgb("+m.join(",")+")");a.strokeStyle=h;a.beginPath();a.moveTo(k.x,k.y);a.lineTo(g.x,g.y);a.stroke()}}}};
var Renderer=GMap.Canvas.extend({_initContainer:function(){GMap.Canvas.prototype._initContainer.call(this);this._hotline=new Hotline(this._container)},_update:function(){GMap.Canvas.prototype._update.call(this);this._hotline.width(this._container.width);this._hotline.height(this._container.height)},_updatePoly:function(a){if(this._drawing){var b=a._parts;b.length&&(this._updateOptions(a),this._hotline.data(b).draw())}},_updateOptions:function(a){null!=a.options.min&&this._hotline.min(a.options.min);
null!=a.options.max&&this._hotline.max(a.options.max);null!=a.options.weight&&this._hotline.weight(a.options.weight);null!=a.options.outlineWidth&&this._hotline.outlineWidth(a.options.outlineWidth);null!=a.options.outlineColor&&this._hotline.outlineColor(a.options.outlineColor);a.options.palette&&this._hotline.palette(a.options.palette)}}),renderer=function(a){return GMap.Browser.canvas?new Renderer(a):null};
GMap.Hotline=GMap.Polyline.extend({statics:{Renderer:Renderer,renderer:renderer},options:{renderer:renderer(),min:0,max:1,palette:{0:"green","0.5":"yellow",1:"red"},weight:5,outlineColor:"black",outlineWidth:1},getRGBForValue:function(a){return this._renderer._hotline.getRGBForValue(a)},_projectLatlngs:function(a,b,c){var d=a.length,e;if(a[0]instanceof GMap.LatLng){var f=[];for(e=0;e<d;e++)f[e]=this._map.latLngToLayerPoint(a[e]),f[e].z=a[e].alt,c.extend(f[e]);b.push(f)}else for(e=0;e<d;e++)this._projectLatlngs(a[e],
b,c)},_clipPoints:function(){if(this.options.noClip)this._parts=this._rings;else{var a=this._parts=[],b=this._renderer._bounds,c,d,e,f;var k=c=0;for(d=this._rings.length;c<d;c++){var g=this._rings[c];var h=0;for(e=g.length;h<e-1;h++)if(f=Util.clipSegment(g[h],g[h+1],b,h,!0))if(a[k]=a[k]||[],a[k].push(f[0]),f[1]!==g[h+1]||h===e-2)a[k].push(f[1]),k++}}},_clickTolerance:function(){return this.options.weight/2+this.options.outlineWidth+(GMap.Browser.touch?10:0)}});function GLineLabelOverlay_toPoint(a,b,c){return a instanceof GMap.Point?a:GMap.Util.isArray(a)?new GMap.Point(a[0],a[1]):void 0===a||null===a?a:"object"===typeof a&&"x"in a&&"y"in a?new GMap.Point(a.x,a.y):new GMap.Point(a,b,c)}
GMap.GLineLabelOverlay=GMap.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9,lineLableVisible:!0},onAdd:function(a){GMap.DivOverlay.prototype.onAdd.call(this,a);this.setOpacity(this.options.opacity);this._map=a;GMap.DomEvent.on(this._container.childNodes[1],"click",this._hideDetailLabel,this);GMap.DomEvent.on(this._container.childNodes[0],"click",this._showDetailLabel,this)},onRemove:function(a){GMap.DivOverlay.prototype.onRemove.call(this,
a);null!=this._poly&&(this._map.removeLayer(this._poly),delete this._poly);GMap.DomEvent.off(this._container.childNodes[1],"click",this._hideDetailLabel,this);GMap.DomEvent.off(this._container.childNodes[0],"click",this._showDetailLabel,this);null!=this._wrapper&&this.getPane().removeChild(this._wrapper)},_showDetailLabel:function(a){this.options.showDetailLabel=!0;this._container.childNodes[1].style.visibility=""},_hideDetailLabel:function(a){this.options.showDetailLabel=!1;this._container.childNodes[1].style.visibility=
"hidden"},getEvents:function(){return GMap.DivOverlay.prototype.getEvents.call(this)},_close:function(){this._map&&this._map.closeLineLabel(this)},_initLayout:function(){this._contentNode=this._container=GMap.DomUtil.create("div","label-overlay");null==this._poly&&this.options.showLineLabel&&(this._poly=new GMap.GWenziLine([],this.options.shapeOptions),this._poly.setTextContainer2(this),this._map.addLayer(this._poly));var a=document.createElement("span");a.className="mapjb-marker-iconlabel "+this.options.labelClassName;
a.innerHTML=this.options.annoText;this._container.appendChild(a);a=document.createElement("span");a.className="mapjb-marker-iconlabel "+this.options.labelClassName;a.innerHTML=this.options.annoDetailText;this._container.appendChild(a);a=document.createElement("div");a.className="label-overlay2 ";this._wrapper=a;this._wrapper.innerHTML=this.options.label;this.getPane().appendChild(this._wrapper)},_updateLayout:function(){},_resetLabel:function(a,b){this._wrapper.innerHTML=a},_adjustPan:function(){},
_updateContent:function(){},_setPosition:function(a){var b=this._map,c=b.latLngToContainerPoint(b.getCenter()),d=b.layerPointToContainerPoint(a),e=this.options.direction,f=GLineLabelOverlay_toPoint(this.options.offset),k=this._getAnchor(),g=this._wrapper.offsetWidth,h=this._wrapper.offsetHeight,l=new GMap.Point(a.x,a.y);"top"===e||"TOP"===e?l=l.add(GLineLabelOverlay_toPoint(-g/2+f.x,-h+f.y+k.y,!0)):"bottom"===e||"BOTTOM"===e?l=l.subtract(GLineLabelOverlay_toPoint(g/2-f.x,-f.y,!0)):"center"===e||"CENTER"===
e?l=l.subtract(GLineLabelOverlay_toPoint(g/2+f.x,h/2-k.y+f.y,!0)):"right"===e||"auto"===e&&d.x<c.x?(e="right",l=l.add(GLineLabelOverlay_toPoint(f.x+k.x,k.y-h/2+f.y,!0))):(e="left",l=l.subtract(GLineLabelOverlay_toPoint(g+k.x-f.x,h/2-k.y-f.y,!0)));new GMap.Point(a.x,a.y);d=this._container.childNodes[0].offsetHeight;c=this._container.childNodes[0].offsetWidth;null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.lineOffset.x,a.y-this.options.lineOffset.y-d);1==this._map.g_adjustWithMap&&
(f=this._map.g_adjustArray[this._map.getZoom()],null==f&&(f=[100,100]),"bottom"!=e&&"BOTTOM"!=e&&(l.y=l.y+f[1]/2+10));GMap.DomUtil.setPosition(this._wrapper,l);console.log("map.getZoom()="+b.getZoom());this.options.showLineLabel&&(null==this._poly&&(this._poly=new GMap.GWenziLine([],this.options.shapeOptions),this._map.addLayer(this._poly),this._poly.setTextContainer2(this)),e=new GMap.Point(a.x+1*this.options.lineOffset.x-3,a.y-1*this.options.lineOffset.y),l=this._map.layerPointToLatLng(e),b=[],
b.push(this._latlng),b.push(l),l=new GMap.Point(e.x,e.y-d),e.x<a.x&&(l=new GMap.Point(e.x-c,e.y-d)),GMap.DomUtil.setPosition(this._container,l),l=new GMap.Point(e.x+c,e.y),e.x<a.x&&(l=new GMap.Point(e.x-c,e.y)),a=this._map.layerPointToLatLng(l),b.push(a),this._poly._setControlLatLngs(b),this._poly._plotExisting());0==this.options.showLineLabel&&null!=this._poly&&this._map.hasLayer(this._poly)&&this._map.removeLayer(this._poly);1==this.options.showLineLabel&&1==this.options.lineLableVisible?(this._container.childNodes[0].style.visibility=
"",this._container.childNodes[1].style.visibility=1==this.options.showDetailLabel?"":"hidden"):(this._container.childNodes[0].style.visibility="hidden",this._container.childNodes[1].style.visibility="hidden")},_getOffsetFromPos:function(){},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a;this._container&&GMap.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,
a.zoom,a.center);this._setPosition(a)},_getAnchor:function(){return GLineLabelOverlay_toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])},_setVisible:function(a){this.options.lineLableVisible=a;0==a?(this._container.childNodes[0].style.visibility="hidden",this._container.childNodes[1].style.visibility="hidden",null!=this._wrapper&&(this._wrapper.style.visibility="hidden"),null!=this._poly&&this._poly.setStyle({opacity:0})):(1==this.options.showLineLabel?
(this._container.childNodes[0].style.visibility="",this._container.childNodes[1].style.visibility=1==this.options.showDetailLabel?"":"hidden"):(this._container.childNodes[0].style.visibility="hidden",this._container.childNodes[1].style.visibility="hidden"),null!=this._wrapper&&(this._wrapper.style.visibility=""),null!=this._poly&&this._poly.setStyle({opacity:1}))}});
GMap.Map.include({openLineLabel:function(a,b,c){a instanceof GMap.GLineLabelOverlay||(a=(new GMap.GLineLabelOverlay(c)).setContent(a));b&&a.setLatLng(b);return this.hasLayer(a)?this:this.addLayer(a)},closeLineLabel:function(a){a&&this.removeLayer(a);return this}});
GMap.Layer.include({bindLineLabel:function(a,b){if(a instanceof GMap.GLineLabelOverlay)GMap.Util.setOptions(a,b),this._lineLabelTip=a,a._source=this;else{if(!this._lineLabelTip||b)this._lineLabelTip=new GMap.GLineLabelOverlay(b,this);this._lineLabelTip.setContent(a)}this._initLineLabelInteractions();this._lineLabelTip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openLineLabel();return this},unbindLineLabel:function(){this._lineLabelTip&&(this._initLineLabelInteractions(!0),this.closeLineLabel(),
this._lineLabelTip=null);return this},_initLineLabelInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b={remove:this.closeLineLabel,move:this._moveLineLabel};this._lineLabelTip.options.permanent?b.add=this._openLineLabel:(b.mouseover=this._openLineLabel,b.mouseout=this.closeLineLabel,this._lineLabelTip.options.sticky&&(b.mousemove=this._moveLineLabel));this[a?"off":"on"](b);this._tooltipHandlersAdded=!a}},openLineLabel:function(a,b){a instanceof GMap.Layer||(b=a,a=this);if(a instanceof
GMap.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}b||(b=a.getCenter?a.getCenter():a.getLatLng());this._lineLabelTip&&this._map&&(this._lineLabelTip._source=a,this._lineLabelTip.update(),this._map.openLineLabel(this._lineLabelTip,b));return this},closeLineLabel:function(){this._lineLabelTip&&this._lineLabelTip._close();return this},toggleLineLabel:function(a){this._lineLabelTip&&(this._lineLabelTip._map?this.closeLineLabel():this.openLineLabel(a));return this},isLineLabelOpen:function(){return this._lineLabelTip.isOpen()},
setLineLabelContent:function(a){this._lineLabelTip&&this._lineLabelTip.setContent(a);return this},getLineLabel:function(){return this._lineLabelTip},_openLineLabel:function(a){this._lineLabelTip&&this._map&&this.openLineLabel(a.layer||a.target,this._lineLabelTip.options.sticky?a.latlng:void 0)},_moveLineLabel:function(a){var b=a.latlng;this._lineLabelTip.options.sticky&&a.originalEvent&&(a=this._map.mouseEventToContainerPoint(a.originalEvent),a=this._map.containerPointToLayerPoint(a),b=this._map.layerPointToLatLng(a));
this._lineLabelTip.setLatLng(b)},_updateLabelVisible:function(){this._container.style.visibility=1==this.options.showLineLabel?"":"hidden";this._container.childNodes[0].style.visibility=1==this.options.showDetailLabel?"":"hidden"}});GMap.GDivLineIcon=GMap.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null},createIcon:function(a){a=a&&"DIV"===a.tagName?a:document.createElement("div");var b=this.options,c=document.createElement("span");c.innerHTML=b.html;a.appendChild(c);this._setIconStyles(a,"icon");return a},_setIconStyles:function(a,b){var c=this.options,d=c[b+"Size"];"number"==typeof d&&(d=[d,d]);d=(d=new GMap.Point(d[0],d[1]),d.divideBy(2,!0));a.className="gmap-marker-"+b+" "+(c.className||"");d&&(a.style.marginLeft=
-d.x+"px",a.style.marginTop=-d.y+"px")},createShadow:function(){return null}});function GGTextLineOverly_toPoint(a,b,c){return a instanceof GMap.Point?a:GMap.Util.isArray(a)?new GMap.Point(a[0],a[1]):void 0===a||null===a?a:"object"===typeof a&&"x"in a&&"y"in a?new GMap.Point(a.x,a.y):new GMap.Point(a,b,c)}
GMap.GGTextLineOverly=GMap.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9,showTextLine:!0},initialize:function(a){GMap.setOptions(this,a)},onAdd:function(a){GMap.DivOverlay.prototype.onAdd.call(this,a);this.setOpacity(this.options.opacity);this._map=a},onRemove:function(a){GMap.DivOverlay.prototype.onRemove.call(this,a);null!=this._poly&&(this._map.removeLayer(this._poly),delete this._poly)},getEvents:function(){return GMap.DivOverlay.prototype.getEvents.call(this)},
_close:function(){this._map&&this._map.closeTextLine(this)},_initLayout:function(){this._contentNode=this._container=GMap.DomUtil.create("div","label-overlay");null==this._poly&&1==this.options.showTextLine&&(this._poly=new GMap.Polyline([],this.options.shapeOptions),this._map.addLayer(this._poly))},_updateLayout:function(){},_adjustPan:function(){},_updateContent:function(){},_setPosition:function(a){var b=this._map;b.latLngToContainerPoint(b.getCenter());b.layerPointToContainerPoint(a);var c=this.options.direction;
GGTextLineOverly_toPoint(this.options.offset);this._getAnchor();if(this.options.showTextLine&&(null==this._poly&&(this._poly=new GMap.Polyline([],this.options.shapeOptions),this._map.addLayer(this._poly)),b=this._source._icon,null!=b)){var d=b.offsetWidth,e=this._source.options.icon.options.iconSize,f=a.x-e[0]/2;b=a.y+b.offsetHeight-e[1]/2;"bottom"==c&&(b=a.y-e[1]/2);c=f+d;a=new GMap.Point(f,b);a=this._map.layerPointToLatLng(a);b=new GMap.Point(c,b);b=this._map.layerPointToLatLng(b);f=[];f.push(b);
f.push(a);this._poly.setLatLngs(f)}},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a;this._container&&GMap.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(a)},_getAnchor:function(){return GGTextLineOverly_toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():
[0,0])}});GMap.Map.include({openTextLine:function(a,b,c){a instanceof GMap.GGTextLineOverly||(a=(new GMap.GGTextLineOverly(c)).setContent(a));b&&a.setLatLng(b);return this.hasLayer(a)?this:this.addLayer(a)},closeTextLine:function(a){a&&this.removeLayer(a);return this}});
GMap.Layer.include({bindTextLine:function(a,b){if(a instanceof GMap.GGTextLineOverly)GMap.Util.setOptions(a,b),this._textLineTip=a,a._source=this;else{if(!this._textLineTip||b)this._textLineTip=new GMap.GGTextLineOverly(b,this);this._textLineTip.setContent(a);this._textLineTip._source=this}this._initTextLineInteractions();this._textLineTip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTextLine();return this},unbindTextLine:function(){this._textLineTip&&(this._initTextLineInteractions(!0),
this.closeTextLine(),this._textLineTip=null);return this},_initTextLineInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b={remove:this.closeTextLine,move:this._moveTextLine};this._textLineTip.options.permanent?b.add=this._openTextLine:(b.mouseover=this._openTextLine,b.mouseout=this.closeTextLine,this._textLineTip.options.sticky&&(b.mousemove=this._moveTextLine));this[a?"off":"on"](b);this._tooltipHandlersAdded=!a}},openTextLine:function(a,b){a instanceof GMap.Layer||(b=a,a=this);if(a instanceof
GMap.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}b||(b=a.getCenter?a.getCenter():a.getLatLng());this._textLineTip&&this._map&&(this._textLineTip._source=a,this._textLineTip.update(),this._map.openTextLine(this._textLineTip,b));return this},closeTextLine:function(){this._textLineTip&&this._textLineTip._close();return this},toggleTextLine:function(a){this._textLineTip&&(this._textLineTip._map?this.closeTextLine():this.openTextLine(a));return this},isTextLineOpen:function(){return this._textLineTip.isOpen()},
setTextLineContent:function(a){this._textLineTip&&this._textLineTip.setContent(a);return this},updateIconContent:function(a){a=GMap.divIcon({html:a,className:"my-div-icon",iconSize:30,keyid:this.options.icon.options.keyid,style:this.options.icon.options.style,name:this.options.icon.options.name});this.setIcon(a)},getTextLine:function(){return this._textLineTip},_openTextLine:function(a){this._textLineTip&&this._map&&this.openTextLine(a.layer||a.target,this._textLineTip.options.sticky?a.latlng:void 0)},
_moveTextLine:function(a){var b=a.latlng;this._textLineTip.options.sticky&&a.originalEvent&&(a=this._map.mouseEventToContainerPoint(a.originalEvent),a=this._map.containerPointToLayerPoint(a),b=this._map.layerPointToLatLng(a));this._textLineTip.setLatLng(b)}});
GMap.GWenziLine=GMap.Polyline.extend({_editIcon:GMap.divIcon({className:"gmap-line-icon",iconSize:[30,30]}),options:{weight:2,color:"#000",readOnly:!1},initialize:function(a,b){this._controlLatLngs=[];this._lineMarkers=[];this._setControlLatLngs(a);GMap.Polyline.prototype.initialize.call(this,[],b)},onAdd:function(a){GMap.Polyline.prototype.onAdd.call(this,a);this._map=a;this._plotExisting();this.options.readOnly||this._bindMapClick()},onRemove:function(a){for(index in this._lineMarkers)this._map.removeLayer(this._lineMarkers[index]);
this._lineMarkers=[];this._unbindMapClick();GMap.Polyline.prototype.onRemove.call(this,a)},setTextContainer:function(a){this.textobj=a;this.isForMark=!1},setTextContainer2:function(a){this.textobj=a;this.isForMark=!0},setLatLngs:function(a){GMap.Polyline.prototype.setLatLngs.call(this,a)},setCtrlVisible:function(a){var b="block";1==a&&(b="none");a=0;for(1==this.isForMark&&(a=1);a<this._lineMarkers.length;a++)this._lineMarkers[a]._icon.style.display=b},setReadOnly:function(a){this.setCtrlVisible(a);
if(a&&!this.options.readOnly){var b="_unbindMarkerEvents";this._unbindMapClick()}else!a&&this.options.readOnly&&(b="_bindMarkerEvents",this._bindMapClick());if("undefined"!==typeof b)for(index in this.options.readOnly=a,this._lineMarkers)this[b](this._lineMarkers[index])},_bindMapClick:function(){this._map.on("click",this._onMapClick,this)},_unbindMapClick:function(){this._map.off("click",this._onMapClick,this)},_setControlLatLngs:function(a){this._controlLatLngs=a},_replot:function(a){if(a){a=a.target.options.index;
var b=-1;1==a?b=2:2==a&&(b=1);if(0<b){b=this._lineMarkers[b];var c=b.getLatLng().lng;a=this._lineMarkers[a].getLatLng().lat;b.setLatLng(new GMap.LatLng(a,c));this._map.latLngToLayerPoint(this._lineMarkers[0].getLatLng());this._map.latLngToLayerPoint(this._lineMarkers[1].getLatLng())}0==this.isForMark||null==this.isForMark?(this.textobj._latlng.lat=this._lineMarkers[0].getLatLng().lat,this.textobj._latlng.lng=this._lineMarkers[0].getLatLng().lng,this.textobj._latlng2.lat=this._lineMarkers[1].getLatLng().lat,
this.textobj._latlng2.lng=this._lineMarkers[1].getLatLng().lng,this.textobj._reset()):(this.textobj._latlng.lat=this._lineMarkers[0].getLatLng().lat,this.textobj._latlng.lng=this._lineMarkers[0].getLatLng().lng,a=this._map.latLngToLayerPoint(this._lineMarkers[0].getLatLng()),b=this._map.latLngToLayerPoint(this._lineMarkers[1].getLatLng()),this.textobj.options.lineOffset.y=a.y-b.y,this.textobj.options.lineOffset.x=b.x+3-a.x,a=this.textobj._source.options.icon.options.style,a.textx=this.textobj.options.lineOffset.x,
a.texty=this.textobj.options.lineOffset.y,this.textobj._updatePosition())}this._redraw()},_getNewMarker:function(a,b){return new GMap.marker(a,b)},_unbindMarkerEvents:function(a){a.off("drag",this._replot,this);a.dragging.disable()},_bindMarkerEvents:function(a){a.on("drag",this._replot,this);a.dragging.enable()},_addToMapAndBindMarker:function(a){a.addTo(this._map);this.options.readOnly||this._bindMarkerEvents(a)},_removePoint:function(a){this._map.removeLayer(this._lineMarkers[this._lineMarkers.indexOf(a.target)]);
this._lineMarkers.splice(this._lineMarkers.indexOf(a.target),1);this._replot()},_onMapClick:function(a){},_addNewMarker:function(a){a=this._getNewMarker(a.latlng,{icon:this._editIcon,index:a.index});this._addToMapAndBindMarker(a);this._lineMarkers.push(a);return a},setEdit:function(a){var b="block";0==a&&(b="none");a=0;for(1==this.isForMark&&(a=1);a<this._lineMarkers.length;a++)this._lineMarkers[a]._icon.style.display=b},_plotExisting:function(){for(var a=0;a<this._controlLatLngs.length;a++){var b=
this._lineMarkers[a];null==b?b=this._addNewMarker({latlng:this._controlLatLngs[a],index:a}):b.setLatLng(this._controlLatLngs[a]);1==this.isForMark&&0==a&&null!=b._icon&&(b._icon.style.display="none")}this._replot()},_redraw:function(){this.setLatLngs([]);this.redraw();for(var a=[],b=0;b<this._lineMarkers.length;b++)a.push(this._lineMarkers[b].getLatLng());this.setLatLngs(a);this.redraw()}});(function(a,b,c){GMap.Pattern=GMap.Class.extend({includes:[GMap.Evented],options:{x:0,y:0,width:8,height:8,patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse"},_addShapes:GMap.Util.falseFn,_update:GMap.Util.falseFn,initialize:function(a){this._shapes={};GMap.setOptions(this,a)},onAdd:function(a){this._map=a.target?a.target:a;this._map._initDefRoot();this._initDom();for(var b in this._shapes)this._shapes[b].onAdd(this);this._addShapes();this._addDom();this.redraw();if(this.getEvents)this._map.on(this.getEvents(),
this)},onRemove:function(){this._removeDom()},redraw:function(){if(this._map){this._update();for(var a in this._shapes)this._shapes[a].redraw()}return this},setStyle:function(a){GMap.setOptions(this,a);this._map&&(this._updateStyle(),this.redraw());return this},addTo:function(a){a.addPattern(this);return this},remove:function(){return this.removeFrom(this._map)},removeFrom:function(a){a&&a.removePattern(this);return this}});GMap.Map.addInitHook(function(){this._patterns={}});GMap.Map.include({addPattern:function(a){var b=
GMap.stamp(a);this._patterns||(this._patterns={});if(this._patterns[b])return a;this._patterns[b]=a;this.whenReady(a.onAdd,a);return this},removePattern:function(a){var b=GMap.stamp(a);if(!this._patterns[b])return this;if(this._loaded)a.onRemove(this);a.getEvents&&this.off(a.getEvents(),a);delete this._patterns[b];this._loaded&&a.fire("remove");a._map=null;return this},hasPattern:function(a){return!!a&&GMap.stamp(a)in this._patterns}});GMap.Pattern.SVG_NS="http://www.w3.org/2000/svg";GMap.Pattern=
GMap.Pattern.extend({_createElement:function(a){return b.createElementNS(GMap.Pattern.SVG_NS,a)},_initDom:function(){this._dom=this._createElement("pattern");this.options.className&&GMap.DomUtil.addClass(this._dom,this.options.className);this._updateStyle()},_addDom:function(){this._map._defRoot.appendChild(this._dom)},_removeDom:function(){GMap.DomUtil.remove(this._dom)},_updateStyle:function(){var a=this._dom,b=this.options;if(a){a.setAttribute("id",GMap.stamp(this));a.setAttribute("x",b.x);a.setAttribute("y",
b.y);a.setAttribute("width",b.width);a.setAttribute("height",b.height);a.setAttribute("patternUnits",b.patternUnits);a.setAttribute("patternContentUnits",b.patternContentUnits);if(b.patternTransform||b.angle){var c=b.patternTransform?b.patternTransform+" ":"";c+=b.angle?"rotate("+b.angle+") ":"";a.setAttribute("patternTransform",c)}else a.removeAttribute("patternTransform");for(var k in this._shapes)this._shapes[k]._updateStyle()}}});GMap.Map.include({_initDefRoot:function(){if(!this._defRoot)if("function"===
typeof this.getRenderer){var a=this.getRenderer(this);this._defRoot=GMap.Pattern.prototype._createElement("defs");a._container.appendChild(this._defRoot)}else this._pathRoot||this._initPathRoot(),this._defRoot=GMap.Pattern.prototype._createElement("defs"),this._pathRoot.appendChild(this._defRoot)}});GMap.SVG?GMap.SVG.include({_superUpdateStyle:GMap.SVG.prototype._updateStyle,_updateStyle:function(a){this._superUpdateStyle(a);a.options.fill&&a.options.fillPattern&&a._path.setAttribute("fill","url(#"+
GMap.stamp(a.options.fillPattern)+")")}}):GMap.Path.include({_superUpdateStyle:GMap.Path.prototype._updateStyle,_updateStyle:function(){this._superUpdateStyle();this.options.fill&&this.options.fillPattern&&this._path.setAttribute("fill","url(#"+GMap.stamp(this.options.fillPattern)+")")}});GMap.StripePattern=GMap.Pattern.extend({options:{weight:4,spaceWeight:4,color:"#ff0000",spaceColor:"#ffffff",opacity:1,spaceOpacity:0},_addShapes:function(){this._stripe=new GMap.PatternPath({stroke:!0,weight:this.options.weight,
color:this.options.color,opacity:this.options.opacity});this._space=new GMap.PatternPath({stroke:!0,weight:this.options.spaceWeight,color:this.options.spaceColor,opacity:this.options.spaceOpacity});this.addShape(this._stripe);this.addShape(this._space);this._update()},_update:function(){this._stripe.options.d="M0 "+this._stripe.options.weight/2+" H "+this.options.width;this._space.options.d="M0 "+(this._stripe.options.weight+this._space.options.weight/2)+" H "+this.options.width},setStyle:GMap.Pattern.prototype.setStyle});
GMap.stripePattern=function(a){return new GMap.StripePattern(a)};GMap.PatternShape=GMap.Class.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.8,fillRule:"evenodd"},initialize:function(a){GMap.setOptions(this,a)},onAdd:function(a){this._pattern=a;this._pattern._dom&&(this._initDom(),this._addDom())},addTo:function(a){a.addShape(this);return this},redraw:function(){this._pattern&&this._updateShape();return this},setStyle:function(a){GMap.setOptions(this,
a);this._pattern&&this._updateStyle();return this},setShape:function(a){this.options=GMap.extend({},this.options,a);this._updateShape()}});GMap.Pattern.include({addShape:function(a){var b=GMap.stamp(a);if(this._shapes[b])return a;this._shapes[b]=a;a.onAdd(this)}});GMap.PatternShape.SVG_NS="http://www.w3.org/2000/svg";GMap.PatternShape=GMap.PatternShape.extend({_createElement:function(a){return b.createElementNS(GMap.PatternShape.SVG_NS,a)},_initDom:GMap.Util.falseFn,_updateShape:GMap.Util.falseFn,
_initDomElement:function(a){this._dom=this._createElement(a);this.options.className&&GMap.DomUtil.addClass(this._dom,this.options.className);this._updateStyle()},_addDom:function(){this._pattern._dom.appendChild(this._dom)},_updateStyle:function(){var a=this._dom,b=this.options;a&&(b.stroke?(a.setAttribute("stroke",b.color),a.setAttribute("stroke-opacity",b.opacity),a.setAttribute("stroke-width",b.weight),a.setAttribute("stroke-linecap",b.lineCap),a.setAttribute("stroke-linejoin",b.lineJoin),b.dashArray?
a.setAttribute("stroke-dasharray",b.dashArray):a.removeAttribute("stroke-dasharray"),b.dashOffset?a.setAttribute("stroke-dashoffset",b.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),b.fill?(b.fillPattern?a.setAttribute("fill","url(#"+GMap.stamp(b.fillPattern)+")"):a.setAttribute("fill",b.fillColor||b.color),a.setAttribute("fill-opacity",b.fillOpacity),a.setAttribute("fill-rule",b.fillRule||"evenodd")):a.setAttribute("fill","none"),a.setAttribute("pointer-events",
b.pointerEvents||(b.interactive?"visiblePainted":"none")))}});GMap.PatternPath=GMap.PatternShape.extend({_initDom:function(){this._initDomElement("path")},_updateShape:function(){this._dom&&this._dom.setAttribute("d",this.options.d)}});GMap.PatternCircle=GMap.PatternShape.extend({options:{x:0,y:0,radius:0},_initDom:function(){this._initDomElement("circle")},_updateShape:function(){this._dom&&(this._dom.setAttribute("cx",this.options.x),this._dom.setAttribute("cy",this.options.y),this._dom.setAttribute("r",
this.options.radius))}});GMap.PatternRect=GMap.PatternShape.extend({options:{x:0,y:0,width:10,height:10},_initDom:function(){this._initDomElement("rect")},_updateShape:function(){this._dom&&(this._dom.setAttribute("x",this.options.x),this._dom.setAttribute("y",this.options.y),this._dom.setAttribute("width",this.options.width),this._dom.setAttribute("height",this.options.height),this.options.rx&&this._dom.setAttribute("rx",this.options.rx),this.options.ry&&this._dom.setAttribute("ry",this.options.ry))}});
GMap.PatternLine=GMap.PatternShape.extend({options:{x1:0,y1:4,x2:8,y2:4},_initDom:function(){this._initDomElement("rect")},_updateShape:function(){this._dom&&(this._dom.setAttribute("x1",this.options.x1),this._dom.setAttribute("y1",this.options.y1),this._dom.setAttribute("x2",this.options.x2),this._dom.setAttribute("y2",this.options.y2))}});GMap.PatternPolygon=GMap.PatternShape.extend({options:{points:"30 10 60 50 0 50"},_initDom:function(){this._initDomElement("polygon")},_updateShape:function(){this._dom&&
this._dom.setAttribute("points",this.options.points)}})})(window,document);(function(){var a=GMap.Marker.prototype._initIcon,b=GMap.Marker.prototype._setPos,c="msTransform"===GMap.DomUtil.TRANSFORM;GMap.Marker.addInitHook(function(){var a=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;a&&(a=a[0]+"px "+a[1]+"px");this.options.rotationOrigin=this.options.rotationOrigin||a||"center bottom";this.options.rotationAngle=this.options.rotationAngle||0;this.on("drag",function(a){a.target._applyRotation()})});GMap.Marker.include({_initIcon:function(){a.call(this)},
_setPos:function(a){b.call(this,a);this._applyRotation()},_applyRotation:function(){if(this.options.rotationAngle){var a=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;a&&(a=a[0]+"px "+a[1]+"px");this.options.rotationOrigin=a||"center bottom";this._icon.style[GMap.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin;this._icon.style[GMap.DomUtil.TRANSFORM]=c?"rotate("+this.options.rotationAngle+"deg)":this._icon.style[GMap.DomUtil.TRANSFORM]+(" rotateZ("+this.options.rotationAngle+
"deg)")}},setRotationAngle:function(a){this.options.rotationAngle=a;this.update();return this},setRotationOrigin:function(a){this.options.rotationOrigin=a;this.update();return this}});GMap.LineTextOverlay=GMap.Layer.extend({initialize:function(a,b,c,k){this._latlng2=this._latlng=a;this._angle=b;this._distance=c;GMap.Util.setOptions(this,k);this._visible=!0},options:{offset:null,cssClass:"label-overlay",annoText:""},computeDesitination:function(a,b,c,k){var d=Math.PI/180,e=6378137*(1-.003352810664/
3),f=Math.asin(Math.sin(a*d)*Math.cos(k/e)+Math.cos(a*d)*Math.sin(k/e)*Math.cos(c*d))/d;return new GMap.LatLng(f,b+Math.atan2(Math.sin(c*d)*Math.sin(k/e)*Math.cos(a*d),Math.cos(k/e)-Math.sin(a*d)*Math.sin(f*d))/d)},computeTrueCourse:function(a,b,c,k){var d=Math.PI/180;return(Math.atan2(Math.sin((k-b)*d)*Math.cos(c*d),Math.cos(a*d)*Math.sin(c*d)-Math.sin(a*d)*Math.cos(c*d)*Math.cos((k-b)*d))/d+360)%360},onAdd:function(a){this._map=a;if(this._angle||0<this._distance){var b=this._latlng.lat,d=this._latlng.lng,
c=Math.PI/180,g=this._distance/6371E3/c,h=a.project([b+g,d]),l=a.project([b-g,d]);h=h.add(l).divideBy(2);l=a.unproject(h).lat;var m=Math.acos((Math.cos(g*c)-Math.sin(b*c)*Math.sin(l*c))/(Math.cos(b*c)*Math.cos(l*c)))/c;if(isNaN(m)||0===m)m=g/Math.cos(Math.PI/180*b);b=isNaN(m)?0:h.x-a.project([l,d-m]).x;this.options.offset={};this.options.offset.x=b*Math.sin(this._angle*c);this.options.offset.y=b*Math.cos(this._angle*c);c=this._map.latLngToLayerPoint(this._latlng);b=new GMap.Point(c.x+this.options.offset.x,
c.y-this.options.offset.y);this._latlng2=this._map.layerPointToLatLng(b);this._latlng2=this.computeDesitination(this._latlng.lat,this._latlng.lng,this._angle,this._distance);b=this._map.latLngToLayerPoint(this._latlng2);this.options.offset={};this.options.offset.x=b.x-c.x;this.options.offset.y=b.y-c.y}this._container||this._initLayout();this._poly=new GMap.GWenziLine([],this.options.shapeOptions);this._map.addLayer(this._poly);this._poly.setTextContainer(this);a.getPanes().overlayPane.appendChild(this._container);
a.on("viewreset",this._reset,this);a.on("zoomend",this._reset,this);if(a.options.zoomAnimation&&a.options.markerZoomAnimation)a.on("zoomanim",this._animateZoom,this);this._reset()},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);a=null===this.options.offset?new GMap.Point(a.x,a.y):new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y);GMap.DomUtil.setPosition(this._container,a)},onRemove:function(a){for(var b=this._container.childNodes,d=b.length-
1;0<=d;d--)this._container.removeChild(b[d]);a.getPanes().overlayPane.removeChild(this._container);null!=this._poly&&(a.removeLayer(this._poly),delete this._poly);a.off("viewreset",this._reset,this);a.off("zoomend",this._reset,this);a.off("zoomanim",this._animateZoom,this)},_reset:function(){var a=this._map.latLngToLayerPoint(this._latlng),b=this._map.latLngToLayerPoint(this._latlng2);this._setPos(a,b)},_setPos:function(a,b){new GMap.Point(a.x,a.y);var d=this._container.childNodes[0].offsetHeight,
c=this._container.childNodes[0].offsetWidth;var e=new GMap.Point(b.x,b.y-d);b.x<a.x&&(e=new GMap.Point(b.x-c,b.y-d));GMap.DomUtil.setPosition(this._container,e);null!=this._poly&&(e=new GMap.Point(b.x+c,b.y),b.x<a.x&&(e=new GMap.Point(b.x-c,b.y)),a=this._map.layerPointToLatLng(e),b=[],b.push(this._latlng),b.push(this._latlng2),b.push(a),this._poly._setControlLatLngs(b),this._poly._plotExisting())},_initLayout:function(){var a=document.createElement("div"),b=document.createElement("span");a.className=
"mapjb-marker-icon-wrapper mapjb-zoom-animated";b.className="mapjb-marker-iconlabel "+this.options.labelClassName;b.innerHTML=this.options.annoText;a.appendChild(b);b=document.createElement("span");b.className="mapjb-marker-iconlabel "+this.options.labelClassName;b.innerHTML=this.options.annoDetailText;a.appendChild(b);this._container=a;this._showDetailLabel(this.options.showDetailLabel);return a},updateLabel:function(a,b){"DIV"===this._container.nodeName.toUpperCase()&&(this._container.childNodes[0].innerHTML=
a,this._container.childNodes[1].innerHTML=b,this.options.annoText=a)},setLinedit:function(a){this._poly.setEdit(a)},_showDetailLabel:function(a){this._container.childNodes[1].style.visibility=1==a?"":"hidden"},setRotationAngle:function(a){if((this._angle=a)&&0<this._distance){var b=this._latlng.lat,c=this._latlng.lng;a=Math.PI/180;var d=this._distance/6371E3/a,g=this._map.project([b+d,c]),h=this._map.project([b-d,c]);g=g.add(h).divideBy(2);h=this._map.unproject(g).lat;var l=Math.acos((Math.cos(d*
a)-Math.sin(b*a)*Math.sin(h*a))/(Math.cos(b*a)*Math.cos(h*a)))/a;if(isNaN(l)||0===l)l=d/Math.cos(Math.PI/180*b);b=isNaN(l)?0:g.x-this._map.project([h,c-l]).x;this.options.offset={};this.options.offset.x=b*Math.sin(this._angle*a);this.options.offset.y=b*Math.cos(this._angle*a);a=this._map.latLngToLayerPoint(this._latlng);a=new GMap.Point(a.x+this.options.offset.x,a.y-this.options.offset.y);this._latlng2=this._map.layerPointToLatLng(a)}this._reset()},_setVisible:function(a){this._visible=a;0==a?(this._container.childNodes[0].style.visibility=
"hidden",this._container.childNodes[1].style.visibility="hidden",null!=this._wrapper&&(this._wrapper.style.visibility="hidden"),null!=this._poly&&this._poly.setStyle({opacity:0})):(this._container.childNodes[0].style.visibility="",this._container.childNodes[1].style.visibility="",null!=this._wrapper&&(this._wrapper.style.visibility=""),null!=this._poly&&this._poly.setStyle({opacity:1}))},_updateLayout:function(){},_adjustPan:function(){}})})();GMap.PolygonFill=GMap.Polygon.extend({_originalInitialize:GMap.Polygon.prototype.initialize,initialize:function(a,b){this._originalInitialize(a,b)},_updatePath:function(){null!=this.options.fillType?this._renderer._updatePolycol(this,!0):this._renderer._updatePoly(this,!0)}});GMap.polygonFill=function(a,b){return new GMap.PolygonFill(a,b)};
var tmpCanvas=document.createElement("canvas"),tmpCtx=tmpCanvas.getContext("2d"),createImageData=function(a,b){return tmpCtx.createImageData(a,b)},setPixel=function(a,b,c,d){c=4*(d*a.width+c);a=a.data;a[c]=b.r;a[c+1]=b.g;a[c+2]=b.b;a[c+3]=b.a},newCanvas=function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c},imageDataToCanvas=function(a){var b=newCanvas(a.width,a.height);b.getContext("2d").putImageData(a,0,0);return b};
GMap.Canvas.include({_updatePolycol:function(a,b){if(this._drawing){var c,d,e=a._parts,f=e.length,k=this._ctx;if(f){k.beginPath();for(c=0;c<f;c++){var g=0;for(d=e[c].length;g<d;g++){var h=e[c][g];k[g?"lineTo":"moveTo"](h.x,h.y)}b&&k.closePath()}this._fillStrokePolycol(k,a)}}},_fillStrokePolycol:function(a,b){for(var c=b.options,d={r:255,g:0,b:0,a:255},e=c.bgFillColor,f=[],k=1;7>k;k+=2)f.push(parseInt("0x"+e.slice(k,k+2)));d.r=f[0];d.g=f[1];d.b=f[2];e=createImageData(8,8);if("fillByXieline"==c.fillType)for(k=
0;8>k;k++)for(f=0;8>f;f++)k==7-f&&setPixel(e,d,k,f);else if("fillByAntixieline"==c.fillType)for(k=0;8>k;k++)for(f=0;8>f;f++)k==f&&setPixel(e,d,k,f);else if("fillByJinline"==c.fillType)for(k=0;8>k;k++)for(f=0;8>f;f++)4!=k&&4!=f||setPixel(e,d,k,f);else if("fillByHline"==c.fillType)for(k=0;8>k;k++)for(f=0;8>f;f++)4==f&&setPixel(e,d,k,f);else if("fillByVline"==c.fillType)for(k=0;8>k;k++)for(f=0;8>f;f++)4==k&&setPixel(e,d,k,f);"fillByColor"==c.fillType?a.fillStyle=c.bgFillColor:(d=imageDataToCanvas(e),
d=a.createPattern(d,"repeat"),a.fillStyle=d);a.fill();c.stroke&&0!==c.weight&&(a.setLineDash&&a.setLineDash(b.options&&b.options._dashArray||[]),a.globalAlpha=c.opacity,a.lineWidth=c.weight,a.strokeStyle=c.color,a.lineCap=c.lineCap,a.lineJoin=c.lineJoin,a.stroke())},_polycol:function(a,b,c){var d=b._pxBounds||this.__polycolBounds;this.__polycolBounds=d;this.__polycolFillData=c=c||this.__polycolFillData;var e=this.__clamp(c.padding,0,100)||1,f=c.noDataColor||"rgb(50,50,50)",k=c.orientation||"vertical";
e=.1*e/100;var g=(d.max.x-d.min.x)/2,h=(d.max.y-d.min.y)/2;d="horizontal"==k?a.createLinearGradient(d.min.x,d.min.y+h,d.max.x,d.max.y-h):a.createLinearGradient(d.min.x+g,d.min.y,d.max.x-g,d.max.y);k=0;for(g=0;g<c.data.length;g++){h=Object.keys(c.data[g])[0];var l=Object.values(c.data[g])[0];l=parseFloat((l/100).toFixed(2))-e;l=this.__clamp(l,0,1);k=this.__clamp(k,0,1);l=this.__clamp(k+l,0,1);d.addColorStop(k,h);d.addColorStop(l,h);k=l+e}1>k&&(d.addColorStop(k,f),d.addColorStop(1,f));a.fillStyle=d;
a.fill(b.options.fillRule)},__clamp:function(a,b,c){return Math.min(Math.max(a,b),c)}});
