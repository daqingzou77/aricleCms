var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};
$jscomp.polyfill=function(a,d,e,c){if(d){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var b=a[c];b in e||(e[b]={});e=e[b]}a=a[a.length-1];c=e[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function d(){this.batch_=null}function e(f){return f instanceof b?f:new b(function(b,c){b(f)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;d.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(f)};var c=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(f){c(f,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=
this.batch_;this.batch_=[];for(var b=0;b<f.length;++b){var c=f[b];f[b]=null;try{c()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};d.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var b=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{f(b.resolve,b.reject)}catch(m){b.reject(m)}};b.prototype.createResolveAndReject_=function(){function b(b){return function(f){a||(a=!0,b.call(c,f))}}var c=this,a=!1;
return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};b.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof b)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var c=null!=f;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};b.prototype.resolveToNonPromiseObj_=function(b){var f=void 0;try{f=b.then}catch(m){this.reject_(m);return}"function"==typeof f?
this.settleSameAsThenable_(f,b):this.fulfill_(b)};b.prototype.reject_=function(b){this.settle_(2,b)};b.prototype.fulfill_=function(b){this.settle_(1,b)};b.prototype.settle_=function(b,c){if(0!=this.state_)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=c;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)g.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var g=new d;b.prototype.settleSameAsPromise_=function(b){var f=this.createResolveAndReject_();b.callWhenSettled_(f.resolve,f.reject)};b.prototype.settleSameAsThenable_=function(b,c){var f=this.createResolveAndReject_();try{b.call(c,f.resolve,f.reject)}catch(h){f.reject(h)}};b.prototype.then=function(f,c){function a(b,f){return"function"==typeof b?function(f){try{e(b(f))}catch(q){g(q)}}:f}var e,g,k=new b(function(b,f){e=b;g=f});this.callWhenSettled_(a(f,e),a(c,g));return k};
b.prototype.catch=function(b){return this.then(void 0,b)};b.prototype.callWhenSettled_=function(b,c){function f(){switch(a.state_){case 1:b(a.result_);break;case 2:c(a.result_);break;default:throw Error("Unexpected state: "+a.state_);}}var a=this;null==this.onSettledCallbacks_?g.asyncExecute(f):this.onSettledCallbacks_.push(f)};b.resolve=e;b.reject=function(f){return new b(function(b,c){c(f)})};b.race=function(f){return new b(function(b,c){for(var a=$jscomp.makeIterator(f),g=a.next();!g.done;g=a.next())e(g.value).callWhenSettled_(b,
c)})};b.all=function(f){var c=$jscomp.makeIterator(f),a=c.next();return a.done?e([]):new b(function(b,f){function g(f){return function(c){d[f]=c;k--;0==k&&b(d)}}var d=[],k=0;do d.push(void 0),k++,e(a.value).callWhenSettled_(g(d.length-1),f),a=c.next();while(!a.done)})};return b},"es6","es3");function l(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}}function x(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):{next:l(a)}}
var y="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,A="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};function B(a,d){if(d){var e=y;a=a.split(".");for(var c=0;c<a.length-1;c++){var b=a[c];b in e||(e[b]={});e=e[b]}a=a[a.length-1];c=e[a];d=d(c);d!=c&&null!=d&&A(e,a,{configurable:!0,writable:!0,value:d})}}
B("Promise",function(a){function d(b){this.b=0;this.i=void 0;this.a=[];var f=this.g();try{b(f.resolve,f.reject)}catch(m){f.reject(m)}}function e(){this.a=null}function c(b){return b instanceof d?b:new d(function(f){f(b)})}if(a)return a;e.prototype.b=function(b){if(null==this.a){this.a=[];var f=this;this.g(function(){f.i()})}this.a.push(b)};var b=y.setTimeout;e.prototype.g=function(f){b(f,0)};e.prototype.i=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=[];for(var c=0;c<b.length;++c){var a=
b[c];b[c]=null;try{a()}catch(h){this.h(h)}}}this.a=null};e.prototype.h=function(b){this.g(function(){throw b;})};d.prototype.g=function(){function b(b){return function(f){a||(a=!0,b.call(c,f))}}var c=this,a=!1;return{resolve:b(this.ua),reject:b(this.h)}};d.prototype.ua=function(b){if(b===this)this.h(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof d)this.wa(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.sa(b):
this.O(b)}};d.prototype.sa=function(b){var c=void 0;try{c=b.then}catch(m){this.h(m);return}"function"==typeof c?this.za(c,b):this.O(b)};d.prototype.h=function(b){this.P(2,b)};d.prototype.O=function(b){this.P(1,b)};d.prototype.P=function(b,c){if(0!=this.b)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.b);this.b=b;this.i=c;this.ra()};d.prototype.ra=function(){if(null!=this.a){for(var b=0;b<this.a.length;++b)g.b(this.a[b]);this.a=null}};var g=new e;d.prototype.wa=function(b){var c=
this.g();b.l(c.resolve,c.reject)};d.prototype.za=function(b,c){var a=this.g();try{b.call(c,a.resolve,a.reject)}catch(h){a.reject(h)}};d.prototype.then=function(b,c){function a(b,c){return"function"==typeof b?function(c){try{f(b(c))}catch(q){e(q)}}:c}var f,e,g=new d(function(b,c){f=b;e=c});this.l(a(b,f),a(c,e));return g};d.prototype.catch=function(b){return this.then(void 0,b)};d.prototype.l=function(b,c){function a(){switch(f.b){case 1:b(f.i);break;case 2:c(f.i);break;default:throw Error("Unexpected state: "+
f.b);}}var f=this;null==this.a?g.b(a):this.a.push(a)};d.resolve=c;d.reject=function(b){return new d(function(c,a){a(b)})};d.race=function(b){return new d(function(a,f){for(var e=x(b),g=e.next();!g.done;g=e.next())c(g.value).l(a,f)})};d.all=function(b){var a=x(b),f=a.next();return f.done?c([]):new d(function(b,e){function g(c){return function(a){d[c]=a;k--;0==k&&b(d)}}var d=[],k=0;do d.push(void 0),k++,c(f.value).l(g(d.length-1),e),f=a.next();while(!f.done)})};return d});
var GTerrain=function(){function a(a,c){this.B=a;this.f=c}var d=2*Math.PI;a.prototype.B="";a.prototype.f=10;a.v=function(){function a(c,b,a,f,e){1==e&&(c=c*Math.PI/180,b=b*Math.PI/180,a=a*Math.PI/180,f=f*Math.PI/180);this.c=c;this.u=b;this.A=a;this.j=f;this.width=this.ha(this);this.height=this.ga(this)}a.prototype.ha=function(c){var b=c.A;c=c.c;b<c&&(b+=d);return b-c};a.prototype.ga=function(c){return c.j-c.u};a.contains=function(c,b,a){var f=c.c,e=c.A;e<f&&(e+=d,0>b&&(b+=d));return b>f&&b<e&&a>=
c.u&&a<=c.j};return a}();a.H=function(){function a(c,b,a){this.x=c;this.y=b;this.z=a}a.prototype.Aa=function(c,b){this.x=c*Math.PI/180;this.y=b*Math.PI/180;this.z=0};return a}();a.ba=function(){function a(){}a.fa=function(c,b,a,f,e,d,h,n){a-=h;e=h-e;d-=n;f-=n;var g=1/(d*a+e*f);b-=n;c-=h;h=(d*c+e*b)*g;a=(-f*c+a*b)*g;return new GTerrain.H(h,a,1-h-a)};return a}();a.G=function(){function a(){this.da=2;this.ea=1;this.K=new GTerrain.v(-180,-90,180,90,1)}a.prototype.N=function(a){return this.da<<a};a.prototype.o=
function(a){return this.ea<<a};a.prototype.V=function(a,b,e){var c=this.K,g=c.width/this.N(e);e=c.height/this.o(e);return new GTerrain.v(a*g+c.c,c.j-(b+1)*e,(a+1)*g+c.c,c.j-b*e)};a.prototype.T=function(a,b,e){var c=this.K;if(!GTerrain.v.contains(c,a,b))return null;var g=this.N(e);e=this.o(e);var m=c.width/g,h=c.height/e;c.A<c.c&&(a+=d);a=(a-c.c)/m|0;a>=g&&(a=g-1);b=(c.j-b)/h|0;b>=e&&(b=e-1);c=[];c[0]=Math.floor(a);c[1]=Math.floor(b);return c};a.prototype.ia=function(a,b,e){e=this.o(e);var c=[];c[0]=
a;c[1]=e-1-b;return c};return a}();a.$=function(){return function(a,c){this.s=a;this.qa=c}}();a.aa=function(){function a(){}a.prototype.L=null;a.prototype.M=null;a.prototype.J=null;return a}();a.Z=function(){return function(a,c){this.D=a;this.Da=c}}();a.X=function(){return function(a,c,b){this.s=a.s;this.D=c.D;this.C=b.C}}();a.Y=function(){return function(a,c,b){this.url=a;this.Ba=c;this.Ca=b}}();a.F=function(){function a(){this.S=0}a.prototype.xa=function(a){for(var b=[{key:"centerX",value:Float64Array.BYTES_PER_ELEMENT},
{key:"centerY",value:Float64Array.BYTES_PER_ELEMENT},{key:"centerZ",value:Float64Array.BYTES_PER_ELEMENT},{key:"minHeight",value:Float32Array.BYTES_PER_ELEMENT},{key:"maxHeight",value:Float32Array.BYTES_PER_ELEMENT},{key:"boundingSphereCenterX",value:Float64Array.BYTES_PER_ELEMENT},{key:"boundingSphereCenterY",value:Float64Array.BYTES_PER_ELEMENT},{key:"boundingSphereCenterZ",value:Float64Array.BYTES_PER_ELEMENT},{key:"boundingSphereRadius",value:Float64Array.BYTES_PER_ELEMENT},{key:"horizonOcclusionPointX",
value:Float64Array.BYTES_PER_ELEMENT},{key:"horizonOcclusionPointY",value:Float64Array.BYTES_PER_ELEMENT},{key:"horizonOcclusionPointZ",value:Float64Array.BYTES_PER_ELEMENT}],c=0,e={},d=0;d<b.length;d++){var m=b[d],h=m.value;e[m.key]=(8==h?a.getFloat64:a.getFloat32).call(a,c,!0);c+=h}return new GTerrain.$(e,c)};a.prototype.w=function(a){return a>>1^-(a&1)};a.prototype.na=function(a,b){var c=a.getUint32(b,!0);this.S=c;var e=new GTerrain.aa,d=new Uint16Array(c),m=new Uint16Array(c),h=new Uint16Array(c);
b+=Uint32Array.BYTES_PER_ELEMENT;for(var n=Uint16Array.BYTES_PER_ELEMENT,t=c*n,u=b,p=u+t,w=p+t,q=0,r=0,z=0,v=0;v<c;v++)q+=this.w(a.getUint16(u+n*v,!0)),r+=this.w(a.getUint16(p+n*v,!0)),z+=this.w(a.getUint16(w+n*v,!0)),d[v]=q,m[v]=r,h[v]=z;e.L=d;e.M=m;e.J=h;return new GTerrain.Z(e,b+3*t)};a.prototype.la=function(a,b,e,f){var c;2===f?c=new Uint16Array(a,b,e):c=new Uint32Array(a,b,e);for(b=a=0;b<c.length;++b)e=c[b],c[b]=a-e,0===e&&++a;return c};a.prototype.ma=function(a,b){var c=65536<this.S?Uint32Array.BYTES_PER_ELEMENT:
Uint16Array.BYTES_PER_ELEMENT;0!==b%c&&(b+=c-b%c);var e=a.getUint32(b,!0);b+=Uint32Array.BYTES_PER_ELEMENT;e*=3;a=this.la(a.buffer,b,e,c);return{Ea:b+e*c,C:a}};a.prototype.decode=function(a){var b=new DataView(a);a=this.xa(b);var c=this.na(b,a.qa);b=this.ma(b,c.Da);return new GTerrain.X(a,c,b)};return a}();a.prototype.va=function(a,c){var b=new GTerrain.H(0,0,0);b.Aa(a,c);return b};a.prototype.ja=function(a){for(var c=[],b=0;b<a.length;b++){var e=a[b];c.push(this.va(e[1],e[0]))}return c};a.prototype.ta=
function(a,c,b){return(1-b)*a+b*c};a.prototype.m=function(a){return 0>a?0:1<a?1:a};a.prototype.R=function(a,c,b){var e=a.D,f=a.C;a=a.s;var d=e.L,m=e.M;e=e.J;for(var h=0,n=f.length;h<n;h+=3){var t=f[h],u=f[h+1],p=f[h+2],w=a.minHeight,q=a.maxHeight,r=GTerrain.ba.fa(c,b,d[t],m[t],d[u],m[u],d[p],m[p]);if(-1E-15<=r.x&&-1E-15<=r.y&&-1E-15<=r.z)return this.ta(w,q,(r.x*e[t]+r.y*e[u]+r.z*e[p])/32767)}return 0};a.prototype.ca=function(a,c,b){a=(new GTerrain.F).decode(a);return this.R(a,c,b)};a.prototype.I=
function(a,c){a=a*Math.PI/180;c=c*Math.PI/180;var b=new GTerrain.G,e=b.T(a,c,this.f),d=b.ia(e[0],e[1],this.f);d=this.B+"/"+this.f+"/"+d[0]+"/"+d[1]+".terrain";b=b.V(e[0],e[1],this.f);a=this.m((a-b.c)/b.width);a*=32767;c=this.m((c-b.u)/b.height);return new GTerrain.Y(d,a,32767*c)};a.prototype.oa=function(a,c){var b=new GTerrain.G,e,d=[],k={};for(e=0;e<a.length;++e){var m=b.T(a[e].x,a[e].y,this.f),h=m[0]+"_"+m[1];k.hasOwnProperty(h)||(m={x:m[0],y:m[1],level:this.f,W:b,U:[]},k[h]=m,d.push(m));k[h].U.push(a[e])}b=
[];for(e=0;e<d.length;++e)k=d[e],k=this.ya(k.x,k.y,k.level,k.W,c).then(this.ka(k)),b.push(k);return Promise.all(b,function(){return a})};a.prototype.ya=function(a,c,b,d,f){return f(this.B+"/"+b+"/"+a+"/"+(d.o(b)-c-1)+".terrain")};a.prototype.ka=function(a){var c=a.U,b=a.W.V(a.x,a.y,a.level),e=this;return function(a){a=(new GTerrain.F).decode(a);for(var d=0;d<c.length;++d){var f=c[d],g=e.m((f.x-b.c)/b.width);g*=32767;var n=e.m((f.y-b.u)/b.height);n*=32767;g=e.R(a,g,n);f.z=g}}};a.prototype.pa=function(a,
c,b){this.oa(a,c).then(function(){b&&b(a)})};return a}();GMap.NumberedIcon=GMap.Icon.extend({createIcon:function(a){a=this._createImg(this._getIconUrl("icon"));var d=document.createElement("div"),e=document.createElement("div");a.setAttribute("style","max-width: 100%; max-height: 100%;");e.setAttribute("class","map__label");e.innerHTML=this.options.label||"";e.style.marginLeft="5px";e.style.marginTop="-38px";d.appendChild(a);d.appendChild(e);this._setIconStyles(d,"icon");d.setAttribute("class",d.getAttribute("class")+" map__label-marker");return d}});
GTerrain.prototype.convertToP3dArray=function(a){return this.ja(a)};GTerrain.prototype.getHeight=function(a,d,e){var c=this,b=this.I(a,d);(function(a){return window.fetch(a,{headers:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9"}}).then(function(b){if(200!==b.status)throw Error("Unable to load tile "+a);return b.arrayBuffer()})})(b.url).then(function(a){a=c.ca(a,b.Ba,b.Ca);e&&e(a)})};
GTerrain.prototype.getHeights=function(a,d){this.pa(a,function(a){return window.fetch(a,{headers:{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9"}}).then(function(c){if(200!==c.status)throw Error("Unable to load tile "+a);return c.arrayBuffer()})},d)};var R=6371E3;
GTerrain.prototype.distanceBetween=function(a,d){var e=Math.PI/180,c=Math.sin((d[1]-a[1])*e/2),b=Math.sin((d[0]-a[0])*e/2);a=c*c+Math.cos(a[1]*e)*Math.cos(d[1]*e)*b*b;return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};GTerrain.prototype.formatPositon=function(a){var d={};d.y=Number(180*a.y/Math.PI).toFixed(6);d.x=Number(180*a.x/Math.PI).toFixed(6);d.z=Number(a.z.toFixed(1));return d};
GTerrain.prototype.getLineHeights=function(a,d,e,c){var b=this.distanceBetween(a,d);e=Math.floor(b/e);b=[];for(var g=0;g<=e;g++){var f=g/e;b.push(this.va((1-f)*a[1]+f*d[1],(1-f)*a[0]+f*d[0]))}this.getHeights(b,c)};
GTerrain.prototype.getLineVisible=function(a,d,e,c,b,g,f,k){a=[a,d];c=[c,b];b=this.distanceBetween(a,c);var m=Math.floor(b/f);f=[];for(b=0;b<=m;b++)d=b/m,f.push(this.va((1-d)*a[0]+d*c[0],(1-d)*a[1]+d*c[1]));this.getHeights(f,function(a){var b=[],c=[],d=[];c[0]=0;d[0]=1;var f=[180*a[0].x/Math.PI,180*a[0].y/Math.PI,a[0].z];a[0].z+=e;a[m].z+=g;for(var h=1;h<a.length;h++){var q=this.distanceBetween(f,[180*a[h].x/Math.PI,180*a[h].y/Math.PI,a[h].z]);var r=a[h].z-a[0].z;q=180*Math.atan(r/q)/Math.PI+90;b.push(q);
1==h?(c[h]=q,d[h]=1):q>=c[h-1]?(c[h]=q,d[h]=1):(d[h]=0,c[h]=c[h-1])}b=[];c=1;for(h=2;h<d.length;h++)d[h]!=c&&(b.push(h),c=(c+1)%2);k&&k(a,b)})};
GTerrain.prototype.drawVisibleLine=function(a,d,e){for(var c=1,b=[180*a[0].y/Math.PI,180*a[0].x/Math.PI],g,f,k=0;k<d.length;k++){f=d[k];g=[180*a[f].y/Math.PI,180*a[f].x/Math.PI];var m=[b,g];if(1==c){var h="green";c=0}else c=1,h="red";e(m,h);b[0]=g[0];b[1]=g[1]}f<a.length&&(m=[g,[180*a[a.length-1].y/Math.PI,180*a[a.length-1].x/Math.PI]],h="red",1==c&&(h="green"),e(m,h))};
GTerrain.prototype.terrainPolyline=function(a){var d=a.positions,e=[],c=R*(a.granularity||1E-5),b=this.distanceBetween([d[0].lng,d[0].lat],[d[1].lng,d[1].lat]);c=Math.floor(b/c);for(b=0;b<=c;b++){var g=b/c;e.push(this.va((1-g)*d[0].lng+g*d[1].lng,(1-g)*d[0].lat+g*d[1].lat))}this.getHeights(e,a.calback)};var myChart1;function formatLength(a){a=Number(a);return 1E3>a?a.toFixed(2)+g_terrainstr[3]:(a/1E3).toFixed(2)+g_terrainstr[4]}
GTerrain.prototype.setEchartsData=function(a,d,e){if(null!=a&&null!=a.arrPoint){$(d).show();null==myChart1&&(myChart1=echarts.init(document.getElementById(e),"dark"));d=[];e=a.arrTransPtX;for(var c=a.arrTransPtY,b=0;b<e.length-1;b++){var g={};g.name="A"+(b+1);g.value="A"+(b+1);g.xAxis=e[b];g.yAxis=c[b];d.push(g)}var f=a.arrPoint;a={grid:{left:10,right:10,bottom:10,containLabel:!0},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:function(a){if(0==a.length)return"";a[0].value;
var b=f[a[0].dataIndex];return g_terrainstr[0]+"&nbsp;"+b.x+","+b.y+"<br />"+g_terrainstr[0]+"&nbsp;<label>"+formatLength(a[0].axisValue)+"</label><br />"+a[0].seriesName+"&nbsp;<label style='color:"+a[0].color+";'>"+formatLength(a[0].value)+"</label><br />"}},xAxis:[{name:"\u884c\u7a0b",type:"category",boundaryGap:!1,axisLine:{show:!1},axisLabel:{show:!1},data:a.arrLen}],yAxis:[{type:"value",axisLabel:{rotate:60,formatter:"{value} "+g_terrainstr[3]}}],series:[{name:g_terrainstr[2],type:"line",smooth:!0,
symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:a.arrHB,markPoint:{data:d}}]};myChart1.setOption(a)}};
GTerrain.prototype.updateSectionForTerrain=function(a,d,e,c){function b(){k++;g.terrainPolyline({positions:[f[k-1],f[k]],granularity:d,calback:function(a,d){for(d=0;d<a.length;d++){0!=d&&(m+=g.distanceBetween([180*a[d].x/Math.PI,180*a[d].y/Math.PI],[180*a[d-1].x/Math.PI,180*a[d-1].y/Math.PI]));h.push(Number(m.toFixed(1)));var q=g.formatPositon(a[d]);n.push(q.z);t.push(q)}u.push(n.length-1);p.push(n[n.length-1]);k>=f.length-1?g.setEchartsData({arrLen:h,arrHB:n,arrPoint:t,arrTransPtX:u,arrTransPtY:p},
e,c):b()}})}var g=this,f=a;if(!(2>f.length)){var k=0,m=0,h=[],n=[],t=[],u=[],p=[];b()}};
GTerrain.prototype.getAngleForTerrain=function(a,d,e){function c(){f++;b.terrainPolyline({positions:[g[f-1],g[f]],granularity:d,calback:function(a,d){for(var h,n=[],p=1;p<a.length;p++)d=b.distanceBetween([180*a[p].x/Math.PI,180*a[p].y/Math.PI],[180*a[p-1].x/Math.PI,180*a[p-1].y/Math.PI]),h=a[p].z-a[p-1].z,n.push(180*Math.atan(h/d)/Math.PI);k.push(a);m.push(n);f>=g.length-1?e&&e(k,m):c()}})}var b=this,g=a;if(!(2>g.length)){var f=0,k=[],m=[];c()}};
var m_grades=[50,40,20,10,-10,-30,-50],m_colors="#800026 #BD0026 #E31A1C #FC4E2A #FD8D3C #FEB24C #FED976 #FFEDA0".split(" "),m_legend=null;GTerrain.prototype.createPaletteFromGrade=function(a,d){for(var e=a[0]-a[a.length-1],c={},b=0;b<a.length;b++)c[(a[b]-a[a.length-1])/e]=d[b];c[0]=d[a.length];return c};GTerrain.prototype.setGradesAndColors=function(a,d){m_grades=a;m_colors=d};
GTerrain.prototype.drawAngleLines=function(a,d,e){for(var c=0;c<a.length;c++){for(var b=a[c],g=d[c],f=[],k=0;k<b.length;k++){var m=180*b[k].y/Math.PI,h=180*b[k].x/Math.PI,n=0;0<k&&(n=g[k-1]);f.push([m,h,n])}b=new GMap.Hotline(f,{min:-50,max:50,palette:this.createPaletteFromGrade(m_grades,m_colors),weight:10,outlineColor:"#000000",outlineWidth:0,noClip:!0,smoothFactor:0});e.addLayer(b)}null==m_legend&&(m_legend=this.addAngleLegend(m_grades,m_colors,e));return b};
GTerrain.prototype.removeLegend=function(a){null!=m_legend&&(a.removeControl(m_legend),m_legend=null)};
GTerrain.prototype.addAngleLegend=function(a,d,e){var c=GMap.control({position:"bottomleft"});c.onAdd=function(b){b=GMap.DomUtil.create("div","info legend");var c='<tr><td><i style="background:'+d[0]+'"></i></td><td> > '+a[0]+"</td></tr> ";var e="<table>"+c;for(var k=1;k<a.length;k++){var m=a[k-1];var h=a[k];c='<tr><td><i style="background:'+d[k]+'"></i></td><td> ';c=c+m+(h?"&ndash;"+h:"+")+"</td></tr>";e+=c}c='<tr><td><i style="background:'+d[a.length-1]+'"></i></td><td> < '+a[a.length-1]+"</td></tr> ";
b.innerHTML=e+c+"</table>";return b};c.onRemove=function(a){};c.addTo(e);return c};GTerrain.prototype.addLayerMarks=function(a,d,e){var c=[];if(a instanceof GMap.Polyline){a=a.getLatLngs();for(var b=1;b<a.length-1;b++){var g=GMap.marker(a[b],{icon:new GMap.NumberedIcon({iconSize:[50,50],iconAnchor:[15,49],iconUrl:d,label:"A"+b,className:"div-marker"})});g.addTo(e);c.push(g)}}return c};
